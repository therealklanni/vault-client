if("undefined"!=typeof module)var window=global;var msrCryptoVersion="1.4",msrCrypto=msrCrypto||function(){"use strict";function e(){function e(e){var r,t=null;if(arguments.length&&"number"!=typeof arguments[0]){if("object"==typeof arguments[0])for(t=new Array(e.length),r=0;r<e.length;r+=1)t[r]=e[r]}else for(t=new Array(e),r=0;e>r;r+=1)t[r]=0;return t}function r(e){for(var r=new Array(e.length),t=0;t<e.length;)r[t]=e[e.length-t-1],t+=1;return r}function t(e,r){e=e.replace(/^\s+|\s+$/g,"");var t=[0],n=[0];r=r||10;for(var o=0;o<e.length;o+=1){var i=parseInt(e[o],r);if(isNaN(i))throw new Error("Failed to convert string to integer in radix "+r.toString());E(t,r,n),x(n,[i],t),w(t)}return t}function n(e,r){if(r=r||10,r>=U)throw new Error("DIGIT_BASE is smaller than RADIX; cannot convert.");var t,n=e.length,o=[],i=[],a=[],s=[],u=[],c=[],l="",f="0";for(u[0]=r;Math.floor(U/u[0])>=r;)u[0]=u[0]*r,f=f.concat("0");for(t=0;n>t;t+=1)c[t]=e[t];for(;;){var y=!0;for(t=0;t<c.length;t+=1)if(0!==c[t]){y=!1;break}if(y)break;D(c,u,o,i,a,s),w(o,c.length,!0);var h=i[0].toString(r);l=f.substring(0,f.length-h.length)+h+l;var g=c;c=o,o=g}for(;0!==l.length&&"0"===l[0];)l=l.substring(1,l.length);return 0===l.length&&(l="0"),l}function o(r){var t=Math.ceil((r+1)/8),n=e(t);return n[0]=Math.pow(2,r%8),n}function i(r){for(var t=e(8*r.length),n=0,o=r.length-1;o>=0;){for(var i=0;8>i;){var a=1<<i,s=(r[o]&a)===a?1:0,u=8*(r.length-o-1)+i;1===s&&(n=u+1),t[u]=s,i+=1}o--}return t.slice(0,n)}function a(e){for(var r=U>>>1,t=F;t-- >0&&(e&r)!==r;)r>>>=1;return t}function s(e){for(var r=0,t=0;r<e.length;){if(0===t)for(var n=7;n>=0&&0===t;){var o=1<<n;(e[r]&o)===o&&(t=n+1),n--}else t+=8;r+=1}return t}function u(e,r,t){e=e.slice();for(var n=[],o=Math.pow(2,r),i=Math.pow(2,r-1),a=0;t>a;a++)n[a]=e[0]%o-i,e[0]=e[0]-n[a],v.shiftRight(e,e,r-1);return n[a]=e[0],n}function c(e,r,t,n,o){for(;o-- >0;)t[n+o]=e[r+o]}function l(e){var r;for(r=0;r<e.length;r+=1)if(0!==e[r])return!1;return!0}function f(e){return 0===(1&e[0])}function y(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t+=1)if(e[t]!==r[t])return!1;return!0}function h(e){var r=Math.floor((e.length+H-1)/H),t=new Array(r);t[0]=0;for(var n=0,o=0,i=0,a=e.length-1;a>=0;a--)n+=L[i++]*(255&e[a]),L[i]===U&&(i=0,t[o++]=n,n=0);return 0!==n&&(t[o]=n),t}function g(e,t,n){var o,i,a,s=[0];for("undefined"==typeof t&&(t=!0),o=0;o<e.length;o+=1)for(a=e[o],i=0;H>i;i+=1)s[o*H+i]=255&a,a=Math.floor(a/256);if(s=r(s),void 0===n&&(n=1),t)for(;s.length>n&&0===s[0];)s.shift();return s}function p(e,r){if("undefined"==typeof r)if(1>=e)r=1;else{var t=Math.log(e)/Math.LN2;r=Math.ceil(t/F)}for(var n=[];e>0;)n.push(e%U),e=Math.floor(e/U);for(;n.length<r;)n.push(0);return n}function d(e){for(var r=e.length-1;r>=0;r--)if(void 0!==e[r]&&0!==e[r])return r;return 0===e[0]?-1:0}function m(e,r){var t=0,n=d(e)+1,o=d(r)+1;if(n>o)t=1;else if(o>n)t=-1;else for(;n-- >0&&0===t;)t=e[n]-r[n];return t}function w(e,r,t){var n=d(e);if(e.length=r||n+1,t)for(;++n<e.length;)e[n]=0;return e.length<=0&&(e[0]=0,e.length=1),e}function b(e,r,t,n){if(void 0===t)t=1;else if(t>=F||0>t)throw new Error("Invalid bit count for shiftRight");void 0===n&&(n=e.length);for(var o=n-1,i=F-t,a=0;o>a;a++)r[a]=(e[a+1]<<i|e[a]>>>t)&z;r[o]=e[o]>>>t}function k(e,r,t,n){if(void 0===t)t=1;else if(t>=F||0>t)throw new Error("bit count must be smaller than DIGIT_BITS and positive in shiftLeft");void 0===n&&(n=e.length);var o=F-t;r[n]=e[n-1]>>>F-t||r[n];for(var i=n-1;i>0;i--)r[i]=(e[i]<<t|e[i-1]>>>o)&z;r[0]=e[0]<<t&z}function x(e,r,t){var n=e,o=r;r.length<e.length&&(n=r,o=e);var i,a=n.length,s=0;for(i=0;a>i;i+=1)s+=n[i]+o[i],t[i]=s&z,s>>=F;for(i=a;i<o.length;i+=1)s+=o[i],t[i]=s&z,s>>=F;return t.length=o.length,0!==s&&(t[i]=s&z),s}function M(e,r,t){var n=r.length;if(e.length<r.length&&(n=d(r)+1,e.length<n))throw new Error("Subtrahend is longer than minuend, not supported.");var o,i=0;for(o=0;n>o;o+=1)i+=e[o]-r[o],t[o]=i&z,i>>=F;for(;o<e.length;)i+=e[o],t[o++]=i&z,i>>=F;return i}function E(e,r,t){var n,o,i,a="number"==typeof r?[r]:r,s=Math.max(e.length,a.length);for(n=0;s>n;n+=1)t[n]=0;for(n=0;n<a.length;n+=1){for(i=0,o=0;o<e.length;o+=1)i+=e[o]*a[n]+t[n+o],t[n+o]=i&z,i=Math.floor(i/U);t[e.length+n]=i&z}return t.length=e.length+a.length,t}function D(e,r,t,n,o,i){var s,u,l,f,y,h,g,p=d(e)+1,v=d(r)+1;if(v>p)return c(e,0,n,0,e.length),n.length=e.length,w(n),t[0]=0,void(t.length=1);if(0===v||1===v&&0===r[v-1])throw new Error("Division by zero.");if(1===v){for(y=r[0],u=0,g=p-1;g>=0;g--)f=u*U+e[g],t[g]=f/y&z,u=f-t[g]*y&z;return t.length=p,w(t),n[0]=u,void(n.length=1)}var m=F-1-a(r[v-1]),b=o||[];b.length=v,k(r,b,m,v);var x=i||[];for(x.length=p,k(e,x,m,p),x[p]=x[p]||0,t.length=p-v+1,n.length=v,g=p-v;g>=0;g--){for(s=Math.floor((x[g+v]*U+x[g+v-1])/b[v-1]),u=x[g+v]*U+x[g+v-1]-s*b[v-1];;)if(!((s>=U||s*b[v-2]>u*U+x[g+v-2])&&(s-=1,u+=b[v-1],U>u)))break;for(l=0,h=0;v>h;h++)f=s*b[h],y=x[h+g]-l-(f&z),x[h+g]=y&z,l=Math.floor(f/U)-Math.floor(y/U);if(y=x[g+v]-l,x[g+v]=y&z,t[g]=s&z,0>y){for(t[g]=t[g]-1,l=0,h=0;v>h;h++)y=x[h+g]+b[h]+l,x[h+g]=y&z,l=y>>F;x[g+v]=x[g+v]+l&z}}for(h=0;v>h;h++)n[h]=(x[h]>>>m|x[h+1]<<F-m)&z;w(t),w(n)}function T(e,r,t,n,o){var i=[];return D(e,r,i,t,n,o),t}function I(e,r,t,n,o,i){var a=[];return E(e,r,a),D(a,t,a,n,o,i),n}function A(e,r,t,n,o){var i;if(l(e))return c(r,0,o,0,r.length),o.length=r.length,0;if(l(r))return c(e,0,o,0,e.length),o.length=e.length,0;m(e,r)<0?(i=e.slice(0),c(r,0,o,0,r.length),o.length=r.length):(i=r.slice(0),c(e,0,o,0,e.length),o.length=e.length),w(o),w(i);var a,s=new Array(o.length),u=new Array(o.length),f=new Array(o.length),y=void 0!==n;y&&(a=new Array(o.length),a[0]=1,a.length=1,n[0]=0,n.length=1);var h,g=new Array(o.length),p=void 0!==t;p&&(h=new Array(o.length),h[0]=0,h.length=1,t[0]=1,t.length=1);for(var d,v=-1,b=t,k=n,M=o;!l(i);)D(o,i,s,u,g,f),p&&(E(s,h,g),x(g,t,g),w(g),d=t,t=h,h=g,g=d),y&&(E(s,a,f),x(f,n,f),w(f),d=n,n=a,a=f,f=d),d=o,o=i,i=u,u=d,v++;return p&&(c(t,0,b,0,t.length),b.length=t.length),y&&(c(n,0,k,0,n.length),k.length=n.length),c(o,0,M,0,o.length),M.length=o.length,v}function K(e,r,t){var n=e,o=r;return m(e,r)>0&&(n=r,o=e),A(n,o,void 0,void 0,t),w(t)}function S(e,r,t){var n=new Array(r.length),o=new Array(r.length),i=new Array(r.length),a=A(e,r,o,n,i);return t=t||[],0!==m(i,W)?(t[0]=NaN,t.length=1):(1===(1&a)?M(r,n,t):(c(n,0,t,0,n.length),t.length=n.length),w(t)),t}function B(e,r,t,n){if(n=n||[],0===m(r,j))n[0]=1;else if(0===m(r,W))c(e,0,n,0,e.length),n.length=e.length;else{var o=new P(t);w(e,o.s,!0),o.modExp(e,r,n),n.length=t.length}return n}function P(r){function t(e){for(var r=1,t=2,n=3,o=n&e,i=2;F>=i;i+=1)o>t&&(r+=t),t<<=1,n=n<<1|1,o=e*r&n;var a=(~r&z)+1;return a}function n(e,r,t,n){n=n||this;var o,i,a,s,u,c=0,l=n.m.length,f=l-1,y=n.mPrime,h=n.m0,g=e[0],p=0;for(a=0;l>a;a+=1)t[a]=0;for(a=0;l>a;a+=1){for(o=r[a],p=g*o+t[0],t[0]=p&z,p=Math.floor(p/U),s=1;l>s;s+=1)p=e[s]*o+t[s]+p,t[s]=p&z,p=Math.floor(p/U);for(c+=p,i=t[0]*y&z,p=Math.floor((t[0]+h*i)/U),s=1,u=0;l>s;s+=1,u++)p=n.m[s]*i+t[s]+p,t[u]=p&z,p=Math.floor(p/U);c+=p,t[f]=c&z,c=Math.floor(c/U)}var d=n.temp1===t?n.temp2:n.temp1,v=0;for(a=0;l>a;a+=1)v=t[a]-n.m[a]+(v>>F),d[a]=v&z;for(v=(c&z)+(v>>F),v=(c>>>F)+(v>>F),a=0;l>a;a+=1)t[a]=v&(d[a]^t[a])^d[a]}function o(r){if(r.length<this.s){r.length=this.s;for(var t=0;t<this.s;t++)r[t]=isNaN(r[t])?0:r[t]}var n=e(r.length);for(this.montgomeryMultiply(r,this.rSquaredModm,n),t=0;t<this.s;t+=1)r[t]=n[t]}function i(e){this.montgomeryMultiply(e,this.one,this.temp1);for(var r=0;r<this.s;r+=1)e[r]=this.temp1[r]}function s(e,r,t){var n,o=2,i=z>>>F-o;for(n=r.length-1;n>0&&0===r[n];n--);var s=n*F+a(r[n])+1;s+=o-s%o;var u=s%F-o;0>u&&(u+=F);var l=i<<u;for(n=1;n<T.length;n++)I(T[n-1],e,this.m,T[n],d,v),w(T[n],this.s,!0);var f=new Array(this.s),y=t,h=v;c(this.rModM,0,h,0,this.s);for(var g;s>0;)this.montgomeryMultiply(h,h,y),this.montgomeryMultiply(y,y,f),g=(r[Math.floor((s-1)/F)]&l)>>>u,this.montgomeryMultiply(f,T[g],h),s-=o,u-=o,l>>>=o,0===l&&(l=i<<F-o,u=F-o);return this.montgomeryMultiply(h,this.one,t),t}var u=r,l=u[0],f=u.length,y=e(f);y[0]=1;var h=t(l),g=e(2*f+1),p=e(f+1),d=e(2*f+1),v=e(2*f+1),m=p;m[f]=1,D(m,u,g,p,d,v);var b=w(p,f,!0),k=e(2*f+1),x=k;x[2*f]=1,D(x,u,g,k,d,v),w(k,f,!0);var M=e(f),E={m:u,mPrime:h,m0:l,temp1:d,temp2:v};n(k,k,M,E);var T=new Array(4);return T[0]=b,T[1]=new Array(f),T[2]=new Array(f),T[3]=new Array(f),{m:r,m0:l,mPrime:h,rSquaredModm:k,s:f,rModM:b,rCubedModm:M,one:y,temp1:d,temp2:v,convertToMontgomeryForm:o,convertToStandardForm:i,montgomeryMultiply:n,modExp:s}}function C(r){function t(e){var r=h(e);if(v.compareDigits(r,this.m_modulus)>=0)throw new Error("The number provided is not an element of this group");return w(r,this.m_digitWidth,!0),f(r,this)}function n(e){var r=p(e,this.m_digitWidth);return f(r,this)}function o(e){return v.normalizeDigitArray(e,this.m_digitWidth,!0),f(e,this)}function i(e){return 0===m(this.m_modulus,e.m_modulus)}function a(e,r,t){var n,o=this.m_digitWidth,i=t.m_digits;v.add(e.m_digits,r.m_digits,i);var a=m(i,this.m_modulus)>=0?z:0,s=0;for(n=0;o>n;n+=1)s=i[n]-(this.m_modulus[n]&a)+s,i[n]=s&z,s>>=F;i.length=o}function s(e,r,t){var n,o=this.m_digitWidth,i=t.m_digits,a=v.subtract(e.m_digits,r.m_digits,t.m_digits);if(-1===a)for(a=0,n=0;o>n;n+=1)a+=i[n]+this.m_modulus[n],i[n]=a&z,a>>=F}function u(e,r){v.modInv(e.m_digits,this.m_modulus,r.m_digits)}function c(e,r,t){return v.modMul(e.m_digits,r.m_digits,this.m_modulus,t.m_digits,k,x)}function l(e,r,t){if(t=t||f([],this),0===m(r,d))t.m_digits=p(1,this.m_digitWidth);else if(0===m(r,b)){for(var n=0;n<e.m_digits.length;n++)t.m_digits[n]=e.m_digits[n];t.m_digits.length=e.m_digits.length}else this.montmul.modExp(e.m_digits,r,t.m_digits),t.m_digits.length=this.montmul.s;return t}function f(e,r){return{m_digits:e,m_group:r,equals:function(e){return 0===m(this.m_digits,e.m_digits)&&this.m_group.equals(this.m_group,e.m_group)}}}var y=h(r),g=y.length,d=p(0,g),b=p(1,g),k=e(g),x=e(g),M=new P(y);return{m_modulus:y,m_digitWidth:g,montmul:M,createElementFromInteger:n,createElementFromBytes:t,createElementFromDigits:o,equals:i,add:a,subtract:s,multiply:c,inverse:u,modexp:l}}for(var F=24,H=Math.floor(F/8),z=(1<<F)-1,U=1<<F,q=z,L=[1,256],N=2;H>=N;N++)L[N]=256*L[N-1];var j=[0],W=[1];return{DIGIT_BITS:F,DIGIT_NUM_BYTES:H,DIGIT_MASK:z,DIGIT_BASE:U,DIGIT_MAX:q,Zero:j,One:W,normalizeDigitArray:w,swapEndianness:r,bytesToDigits:h,stringToDigits:t,digitsToString:n,intToDigits:p,digitsToBytes:g,sequenceEqual:y,isZero:l,isEven:f,powerOfTwo:o,shiftRight:b,shiftLeft:k,compareDigits:m,computeBitArray:i,bitLength:s,fixedWindowRecode:u,IntegerGroup:C,add:x,subtract:M,multiply:E,divRem:D,reduce:T,modInv:S,modExp:B,modMul:I,MontgomeryMultiplier:P,gcd:K}}function r(){function e(e){var r,t=null;if(arguments.length&&"number"!=typeof arguments[0]){if("object"==typeof arguments[0])for(t=[],r=0;r<e.length;r+=1)t[r]=e[r]}else for(t=[],r=0;e>r;r+=1)t[r]=0;return t}var r=v.bytesToDigits,t=function(e,r,t,n,o,a){var s=e.length,u=i(this,!1,o,a,null,!1);return{p:e,a:r,b:t,order:n,generator:u,allocatePointStorage:function(){return i(this,!1,v.intToDigits(0,s),v.intToDigits(0,s))},createPointAtInfinity:function(){return i(this,!0,v.intToDigits(0,s),v.intToDigits(0,s))}}},n=function(e){var n=new t(r(e.p),r(e.a),r(e.b),r(e.order),r(e.gx),r(e.gy));return n.type=e.type,n.name=e.name,n.generator.curve=n,n},o=function(e){var r=v.bytesToDigits,n=new t(r(e.p),r(e.a),r(e.d),r(e.order),r(e.gx),r(e.gy));return n.type=e.type,1==n.type&&(n.d=n.b.slice(),delete n.b),n.rbits=e.info[2],n.name=e.name,n.generator.curve=n,n},i=function(r,t,n,o,a,s){function u(e){return e?h.isInfinity&&e.isInfinity?!0:null===h.z&&null!==e.z?!1:null!==h.z&&null===e.z?!1:null===h.z?0===v.compareDigits(h.x,e.x)&&0===v.compareDigits(h.y,e.y)&&h.isInMontgomeryForm===e.isInMontgomeryForm:0===v.compareDigits(h.x,e.x)&&0===v.compareDigits(h.y,e.y)&&0===v.compareDigits(h.z,e.z)&&h.isInMontgomeryForm===e.isInMontgomeryForm:!1}function c(e,r){if(r.curve=e.curve,r.x=e.x.slice(),r.y=e.y.slice(),null!==e.z?r.z=e.z.slice():r.z=null,l||(r.isAffine=e.isAffine),r.isInMontgomeryForm=e.isInMontgomeryForm,r.isInfinity=e.isInfinity,!r.equals(e))throw new Error("Instances should be equal.")}function f(){var r=i(h.curve,h.isInfinity,e(h.x),e(h.y),h.z?e(h.z):null,h.isInMontgomeryForm);return h.ta&&(r.ta=e(h.ta)),h.tb&&(r.tb=e(h.tb)),r}var h;return"undefined"==typeof a&&(a=null),"undefined"==typeof s&&(s=!1),h={equals:function(e){return u(e)},copy:function(e){c(this,e)},clone:function(){return f()}},y(h,"curve",r,function(){return r},function(e){r=e}),y(h,"x",n,function(){return n},function(e){n=e}),y(h,"y",o,function(){return o},function(e){o=e}),y(h,"z",a,function(){return a},function(e){a=e}),y(h,"isInMontgomeryForm",s,function(){return s},function(e){s=e}),y(h,"isInfinity",t,function(){return t},function(e){t=e}),y(h,"isAffine",null===a,function(){return null===a}),h},a=function(r){function t(e,r,t){var n=V.createElementFromInteger(0);n.m_digits=t,V.subtract(V.createElementFromDigits(e),V.createElementFromDigits(r),n)}function n(e,r,t){var n=V.createElementFromInteger(0);n.m_digits=t,V.add(V.createElementFromDigits(e),V.createElementFromDigits(r),n)}function o(e,t){var n=e.length,o=r.p;if(1===(1&e[0])){for(var i=0,a=0;n>a;a+=1)i+=e[a]+o[a],t[a]=i&v.DIGIT_MASK,i>>>=v.DIGIT_BITS;i<<=v.DIGIT_BITS-1,v.shiftRight(t,t),t[n-1]|=i}else v.shiftRight(e,t)}function i(e,r,t){L.montgomeryMultiply(e,r,t)}function a(e,r){L.montgomeryMultiply(e,e,r)}function s(e,r){return e.isInfinity?void(r.isInfinity=!0):(a(e.z,Q),i(e.z,e.y,R),n(e.x,Q,J),t(e.x,Q,Q),r.z=R.slice(),i(Q,J,G),o(G,J),n(G,J,Q),a(e.y,J),a(Q,R),i(e.x,J,G),t(R,G,R),t(R,G,r.x),t(G,r.x,R),a(J,G),i(Q,R,J),t(J,G,r.y),r.isInfinity=!1,void(r.isInMontgomeryForm=!0))}function u(e,r){if(e.isInfinity)return void(r.isInfinity=!0);a(e.y,G),a(e.x,R),n(R,R,Z),n(Z,R,R),i(e.x,G,Y),a(G,Z),o(R,Q),a(Q,G),i(e.y,e.z,$);for(var s=0;s<$.length;s+=1)r.z[s]=$[s];t(G,Y,r.x),t(r.x,Y,r.x),t(Y,r.x,R),i(Q,R,J),t(J,Z,r.y),r.isInfinity=!1,r.isInMontgomeryForm=!0}function c(e,r){var t=r.clone();if(b(t),!M(t))throw new Error("Invalid Parameter");var n=r.clone();x(n);var o=[r.clone()],i=n.clone(),a=n.clone();f(n,a),k(a);for(var s,u=1;u<Math.pow(2,e-2);u++)h(i,a,i),s=i.clone(),k(s),o[u]=s;return o}function f(e,r){if("undefined"==typeof e)throw new Error("point undefined");if("undefined"==typeof r)throw new Error("outputPoint undefined");if(e.isAffine)throw new Error("Given point was in Affine form. Use convertToJacobian() first.");if(!e.isInMontgomeryForm)throw new Error("Given point must be in Montgomery form. Use montgomeryize() first.");j?u(e,r):s(e,r)}function y(e,r,o){if(e.isInfinity)return r.copy(o),void this.convertToJacobianForm(o);if(r.isInfinity)return void e.copy(o);a(e.z,Y),i(e.z,Y,_),i(r.x,Y,R),i(r.y,_,Y),t(R,e.x,Q),t(Y,e.y,J),a(J,R),a(Q,_),i(_,e.x,Y),i(Q,_,Z),t(R,Y,G),t(G,Y,G),i(e.z,Q,R),t(G,Y,G),i(Z,e.y,_),t(G,Z,G);for(var s=!0,u=0;u<G.length;u++)if(0!==G[1]){s=!1;break}if(s){for(u=0;u<o.x.length;u++)o.x[u]=0,o.y[u]=0,o.z[u]=0;return void(o.y[0]=1)}n(_,_,Q),i(R,G,o.z),i(J,G,R),a(G,Z),n(Q,R,Q),i(Z,Y,R),a(Q,X),i(Z,G,Y),t(X,R,o.x),t(o.x,R,o.x),t(o.x,Y,o.x),t(o.x,R,G),i(Y,_,Z),i(Q,G,R),t(R,Z,o.y),o.isInfinity=!1,o.isInMontgomeryForm=!0}function h(e,r,o){if(null===e)throw new Error("jacobianPoint");if(null===r)throw new Error("affinePoint");if(null===o)throw new Error("outputPoint");if(e.curve!==r.curve||e.curve!==o.curve)throw new Error("All points must be from the same curve object.");if(e.isAffine)throw new Error("Given jacobianPoint was in Affine form. Use ConvertToJacobian() before calling DoubleJacobianAddAffinePoints().");if(!r.isAffine)throw new Error("Given affinePoint was in Jacobian form. Use ConvertToAffine() before calling DoubleJacobianAddAffinePoints().");if(o.isAffine)throw new Error("Given jacobianPoint was in Jacobian form. Use ConvertToJacobian() before calling DoubleJacobianAddAffinePoints().");if(!e.isInMontgomeryForm)throw new Error("Jacobian point must be in Montgomery form");if(!r.isInMontgomeryForm)throw new Error("Affine point must be in Montgomery form");if(e.isInfinity)return r.copy(o),void this.convertToJacobianForm(o);if(r.isInfinity)return void e.copy(o);a(e.z,Q),i(Q,e.z,J),i(Q,r.x,G),i(J,r.y,R),t(G,e.x,Q),t(R,e.y,J);var s;for(s=0;s<Q.length;s+=1)if(0!==Q[s]){i(e.z,Q,Z);for(var u=0;q>u;u+=1)o.z[u]=Z[u];return a(Q,G),i(G,Q,R),i(G,e.x,Y),n(Y,Y,Q),a(J,o.x),t(o.x,Q,o.x),t(o.x,R,o.x),t(Y,o.x,G),i(J,G,Y),i(e.y,R,_),t(Y,_,o.y),o.isInfinity=!1,void(o.isInMontgomeryForm=!0)}for(s=0;s<J.length;s+=1)if(0!==J[s])return o.isInfinity=!0,void(o.isInMontgomeryForm=!0);r.copy(o),this.convertToJacobianForm(o),this["double"](o,o),o.isInMontgomeryForm=!0}function g(e,t,n,o){if(t.isInfinity||v.isZero(e))return void(n.isInfinity=!0);if(v.compareDigits(e,r.order)>=0)throw new Error("The scalar k must be in the range 1 <= k < order.");if(e=e.slice(),1===t.curve.type){var i="undefined"!=typeof t.ta;i||T(t),I(e,t,n,o),i||K(t)}else{var a=t.isInMontgomeryForm,s=n.isInMontgomeryForm,u=n.isAffine;a||w(t),s||w(n),p(e,t,n),u&&k(n),a||b(t),s||b(n)}}function p(e,r,n){var o=r.clone();if(b(o),!M(o))throw new Error("Invalid Parameters.");var i=1&e[0],a=[];for(t(r.curve.order,e,a),k=0;k<e.length;k++)e[k]=i-1&(e[k]^a[k])^e[k];var s=8>=q?5:6,u=r.curve.p.length*v.DIGIT_BITS,l=Math.ceil(u/(s-1)),h=v.fixedWindowRecode(e,s,l),g=c(s,r),p=Math.floor(Math.abs(h[l])-1)/2,w=g[p].clone();x(w);for(var k=l-1;k>=0;k--){for(var E=0;s-2>E;E++)f(w,w);p=Math.floor((Math.abs(h[k])-1)/2);var D=d(g,p);h[k]<0&&m(D,D),y(w,D,w)}for(t(r.curve.p,w.y,a),k=0;k<w.y.length;k++)w.y[k]=i-1&(w.y[k]^a[k])^w.y[k];w.copy(n)}function d(e,r){for(var t=(r+1)%e.length,n=0;n<e.length;n++){var o=e[t].clone();t=(t+1)%e.length}return o}function m(e,r){e!==r&&e.copy(r),t(e.curve.p,e.y,r.y)}function w(e){if(e.isInMontgomeryForm)throw new Error("The given point is already in Montgomery form.");e.isInfinity||(L.convertToMontgomeryForm(e.x),L.convertToMontgomeryForm(e.y),null!==e.z&&L.convertToMontgomeryForm(e.z),"undefined"!=typeof e.ta&&(L.convertToMontgomeryForm(e.ta),L.convertToMontgomeryForm(e.tb))),e.isInMontgomeryForm=!0}function b(e){if(!e.isInMontgomeryForm)throw new Error("The given point is not in montgomery form.");e.isInfinity||(L.convertToStandardForm(e.x),L.convertToStandardForm(e.y),null!==e.z&&L.convertToStandardForm(e.z),"undefined"!=typeof e.ta&&(L.convertToStandardForm(e.ta),L.convertToStandardForm(e.tb))),e.isInMontgomeryForm=!1}function k(e){if(e.isInfinity)return e.z=null,void(l||(e.isAffine=!0));if(v.modInv(e.z,r.p,te),e.isInMontgomeryForm){i(te,L.rCubedModm,re);var t=te;te=re,re=t}a(te,ee),i(e.x,ee,re);for(var n=0;q>n;n+=1)e.x[n]=re[n];i(e.y,ee,re),i(re,te,e.y),e.z=null,delete e.ta,delete e.tb,l||(e.isAffine=!0)}function x(r){if(!r.isAffine)throw new Error("The given point is not in Affine form.");l||(r.isAffine=!1);var t,n,o=r.isInMontgomeryForm?O:W;for(t=e(o.length),n=0;n<o.length;n+=1)t[n]=o[n];r.z=t}function M(e){return e.isInfinity?!1:(v.modMul(e.y,e.y,e.curve.p,Q),v.modMul(e.x,e.x,e.curve.p,J),v.modMul(e.x,J,e.curve.p,G),n(G,e.curve.b,J),v.modMul(e.x,e.curve.a,e.curve.p,G),n(J,G,J),t(Q,J,Q),0==v.isZero(Q)?!1:!0)}function E(e){return e.ta&&(e=e.clone(),K(e)),v.modMul(e.y,e.y,e.curve.p,G),v.modMul(e.x,e.x,e.curve.p,J),v.add(J,G,Q),v.reduce(R,e.curve.p,R),v.modMul(J,G,e.curve.p,R),v.modMul(e.curve.d,R,e.curve.p,G),v.add(G,[1],J),v.reduce(J,e.curve.p,J),v.subtract(Q,J,Q),v.reduce(Q,e.curve.p,Q),0==v.isZero(Q)?!1:!0}function D(e,r){var t=r.clone(),n=t.clone(),o=[];o[0]=P(r),S(t,t),n=P(t),t=r.clone();for(var i=1;e>i;i++)C(n,t,t),o[i]=P(t);return o}function T(e){e.ta=e.x.slice(),e.tb=e.y.slice(),e.z=[1]}function I(e,r,n,o){if(!E(r))throw new Error("Invalid Parameter");var i=r.curve.rbits;o="undefined"==typeof o?!0:o;var a,s,u=8>=q?5:6,c=Math.floor((i+(u-2))/(u-1));e=e.slice();var l=r.clone();T(l),o&&(S(l,l),S(l,l));var f=D(1<<u-2,l),y=1&e[0],h=[];for(t(r.curve.order,e,h),a=0;a<e.length;a++)e[a]=y-1&(e[a]^h[a])^e[a];var g=v.fixedWindowRecode(e,u,c),p=Math.floor(Math.abs(g[c])-1)/2,d=f[p];for(l.x=d.x.slice(),l.y=d.y.slice(),l.z=d.z.slice(),a=c-1;a>=0;a--){for(s=0;u-1>s;s++)S(l,l);p=Math.floor((Math.abs(g[a])-1)/2);var m=A(f,p);g[a]<0&&(t(r.curve.p,m.x,m.x),t(r.curve.p,m.td,m.td)),C(m,l,l)}for(t(r.curve.p,l.x,h),a=0;a<l.x.length;a++)l.x[a]=y-1&(l.x[a]^h[a])^l.x[a];K(l),n.x=l.x.slice(),n.y=l.y.slice()}function A(e,r){for(var t=(r+1)%e.length,n=0;n<e.length;n++){var o={x:e[t].x.slice(),y:e[t].y.slice(),z:e[t].z.slice(),td:e[t].td.slice()};t=(t+1)%e.length}return o}function K(e){v.modInv(e.z,r.p,te),v.modMul(e.x,te,r.p,e.x),v.modMul(e.y,te,r.p,e.y),delete e.ta,delete e.tb,e.z=null}function S(e,r){if("undefined"==typeof e.ta)throw new Error("Point should be in Extended Projective form.");v.modMul(e.x,e.x,e.curve.p,Z),v.modMul(e.y,e.y,e.curve.p,Q),v.modMul(e.z,e.z,e.curve.p,e.ta),t(Q,Z,r.tb),n(Z,Q,Z),n(e.ta,e.ta,e.ta),n(e.y,e.y,e.y),t(e.ta,Z,Q),v.modMul(e.x,e.y,e.curve.p,r.ta),v.modMul(Z,r.tb,e.curve.p,r.y),v.modMul(Q,r.ta,e.curve.p,r.x),v.modMul(Z,Q,e.curve.p,r.z)}function B(e,r,t){e.curve.p;if("undefined"==typeof e.ta)throw new Error("Point1 should be in Extended Projective form.");if("undefined"==typeof r.ta)throw new Error("Point2 should be in Extended Projective form.");var n=P(e);C(n,r,t)}function P(e){var r=e.curve,t=r.p,n={x:e.x.slice(),y:e.y.slice(),z:e.z.slice(),td:[],curve:e.curve};return v.modMul(e.ta,e.tb,t,ee),v.modMul(ee,r.d,t,n.td),n}function C(e,r,o){var i=v,a=r.curve.p;Q=[],J=[],G=[],i.modMul(r.z,e.z,a,G),i.modMul(r.ta,r.tb,a,Q),n(r.x,r.y,r.ta),i.modMul(Q,e.td,a,J),n(e.x,e.y,r.tb),t(G,J,Q),n(G,J,G),i.modMul(r.ta,r.tb,a,J),i.modMul(r.x,e.x,a,r.z),i.modMul(r.y,e.y,a,r.x),t(J,r.z,J),t(r.x,r.z,o.ta),t(J,r.x,o.tb),i.modMul(o.ta,G,a,o.y),i.modMul(o.tb,Q,a,o.x),i.modMul(G,Q,a,o.z)}function F(e,r){var o=e.curve.a.slice(),i=e.curve.d.slice(),a=e.curve.p,s=v.modMul,u=v.modInv;Q=[5],s(o,Q,a,J),t(J,i,J),s(i,Q,a,G),t(o,G,Q),s(e.y,Q,a,G),n(G,J,J),Q=[1],t(Q,e.y,G),Q=[12],s(Q,G,a,R),u(R,a,R),s(e.x,G,a,Q),n(Q,Q,G),n(G,G,G),u(G,a,G),s(R,J,a,r.x),Q=[1],n(e.y,Q,Q),t(o,i,J),s(Q,J,a,R),s(R,G,a,r.y)}function H(e,r){var o=r.curve.a.slice(),i=r.curve.d.slice(),a=r.curve.p,s=v.modMul,u=v.modInv;n(e.x,e.x,Q),n(e.x,Q,Q),n(Q,Q,Q),t(Q,o,J),t(J,i,J),n(e.y,e.y,G),n(e.y,G,G),n(G,G,G),u(G,a,G),s(J,G,a,r.x),n(Q,Q,Q),n(Q,i,J),n(Q,o,Q),n(o,o,G),t(J,G,J),t(J,G,J),t(J,o,J),n(i,i,G),t(Q,G,Q),t(Q,G,Q),t(Q,i,Q),u(Q,a,Q),s(Q,J,a,r.y)}var z=r,U=1===r.type,q=r.p.length,L=v.MontgomeryMultiplier(r.p),N=r.a.slice();L.convertToMontgomeryForm(N);var j=v.isZero(r.a),W=v.One,O=e(q);O[0]=1,L.convertToMontgomeryForm(O);var V=v.IntegerGroup(v.digitsToBytes(L.m),!0),Z=e(q),Q=e(q),J=e(q),G=e(q),R=e(q),Y=e(q),_=e(q),X=e(q),$=e(q),ee=e(q),re=e(q),te=e(q),ne={convertToMontgomeryForm:w,convertToStandardForm:b,convertToAffineForm:k,convertToJacobianForm:x,generatePrecomputationTable:function(e,r){return c(e,r)}};return U?(ne["double"]=S,ne.add=B,ne.scalarMultiply=g,ne.normalize=K,ne.convertToExtendedProjective=T,ne.convertTedToWeierstrass=F,ne.convertWeierstrassToTed=H,ne.generatePrecomputationTable=function(e,r){return D(e,r)}):(ne["double"]=f,ne.mixedDoubleAdd=y,ne.mixedAdd=h,ne.scalarMultiply=g,ne.negate=m),ne},s=function(){return{encodePoint:function(r){if(!r)throw new Error("point");if(!r.isAffine)throw new Error("Point must be in affine form.");if(r.isInMontgomeryForm)throw new Error("Point must not be in Montgomery form.");if(r.isInfinity)return e(1);var t=v.digitsToBytes(r.x),n=v.digitsToBytes(r.y),o=v.digitsToBytes(r.curve.p),i=o.length;if(i<t.length||i<n.length)throw new Error("Point coordinate(s) are bigger than the field order.");var a=e(2*i+1);a[0]=4;for(var s=i-t.length,u=0;u<t.length;u++)a[u+1+s]=t[u];for(s=i-n.length,u=0;u<n.length;u++)a[i+u+1+s]=n[u];return a},decodePoint:function(r,t){if(r.length<1)throw new Error("Byte array must have non-zero length");var n=v.digitsToBytes(t.p),o=n.length;if(0===r[0]&&1===r.length)return t.createPointAtInfinity();if(4===r[0]&&r.length===1+2*o){for(var a=e(o),s=e(o),u=0;o>u;u++)a[u]=r[u+1],s[u]=r[o+u+1];var c=v.bytesToDigits(a),l=v.bytesToDigits(s);return i(t,!1,c,l)}throw new Error("Unsupported encoding format")}}},u=function(e){function r(e){var r=v.intToDigits(0,16);o.modExp(e,n,r);var t=[0];return v.modMul(r,r,o.m,t),0!==v.compareDigits(e,t)?null:r}var t=e,n=[];if("undefined"==typeof e)throw new Error("modulus");if(v.isEven(e))throw new Error("Only odd moduli are supported");var o=v.MontgomeryMultiplier(t);t[0]%4===3?(v.add(t,v.One,n),v.shiftRight(n,n,2)):n=null;var i=new Array(t.length),a=new Array(t.length),s={squareRoot:function(e){if(null!==n)return r(e);throw new Error("GeneralCase not supported.")},jacobiSymbol:function(e){var r,n,o=7,s=3;r=e.slice(),n=t.slice(),v.reduce(r,n,r,i,a);for(var u=1;!v.isZero(r);){for(;v.isEven(r);){v.shiftRight(r,r);var c=n[0]&o;(3===c||5===c)&&(u=-u)}var l=r;r=n,n=l;var f=r[0]&s,y=n[0]&s;3===f&&3===y&&(u=-u),v.reduce(r,n,r,i,a)}return 0===v.compareDigits(n,v.One)?u:0}};return s},c={},f=function(e){var r=c[e.toUpperCase()];if(!r)throw new Error(e+" Unsupported curve.");if(0===r.type)return n(r);if(1===r.type)return o(r);throw new Error(e+" Unsupported curve type.")};return{createCurve:f,curves:c,sec1EncodingFp:s,EllipticCurvePointFp:i,EllipticCurveOperatorFp:a,ModularSquareRootSolver:u}}function t(){function e(e){var r;for(r=e.length-1;r>=0&&(e[r]+=1,e[r]>=256&&(e[r]=0),!e[r]);r-=1);}function r(){a=g.getVector(32),s=g.getVector(16),u=32,c=48,f=1}function n(e,r){if(r=r||[0],r.length>c)throw new Error("Incorrect entropy or additionalEntropy length");r=r.concat(g.getVector(c-r.length)),e=e.concat(g.getVector((c-e.length%c)%c));for(var t=0;t<e.length;t+=c){var n=g.xorVectors(e.slice(t,t+c),r);o(n)}f=1}function o(r){for(var t=[],n=new P.aes(a);t.length<c;){e(s);var o=s.slice(0,16),i=n.encrypt(o);t=t.concat(i)}t=g.xorVectors(t,r),a=t.slice(0,u),s=t.slice(u)}function i(r,t){if(r>=65536)throw new Error("too much random requested");if(f>y)throw new Error("Reseeding is required");if(t&&t.length>0){for(;t.length<c;)t=t.concat(g.getVector(c-t.length));o(t)}else t=g.getVector(c);for(var n=[],i=new P.aes(a);n.length<r;){e(s);var u=s.slice(0,s.length),l=i.encrypt(u);n=n.concat(l)}return n=n.slice(0,r),o(t),f+=1,n}if(!(this instanceof t))throw new Error("create MsrcryptoPrng object with new keyword");var a,s,u,c,l=!1,f=1,y=1<<24;return r(),{reseed:n,init:function(e,t){if(e.length<c)throw new Error("Initial entropy length too short");r(),n(e,t),l=!0},getBytes:function(e,r){if(!l)throw new Error("can't get randomness before initialization");return i(e,r)},getNonZeroBytes:function(e,r){if(!l)throw new Error("can't get randomness before initialization");for(var t,n=[];n.length<e;){t=i(e,r);for(var o=0;o<t.length;o+=1)0!==t[o]&&n.push(t[o])}return n.slice(0,e)}}}function n(){function e(){var e,r=[];for(e=0;n>e;e+=1)r[e]=Math.floor(256*Math.random());var t=window.crypto||window.msCrypto;if(t&&"function"==typeof t.getRandomValues&&window.Uint8Array){var i=new window.Uint8Array(n);t.getRandomValues(i),r=r.concat(Array.apply(null,i)),c=!0}try{var a=new XMLHttpRequest;for(e=0;e<l.length;e+=1)try{var y=a.getResponseHeader(l[e]);if(y){var h=g.stringToBytes(y);r=r.concat(h)}}catch(p){}}catch(p){}c||(r=r.concat(o.splice(0,o.length)),f.startCollectors()),u?s.reseed(r):s.init(r),u=!0}function r(e){for(var r=0;r<e.length;++r)o.push(e[r]);o.length>=i&&f.stopCollectors()}var n=48,o=[],i=128,a=0,s=new t,u=!1,c=!1,l=["Cookie","RedirectUri","ETag","x-ms-client-antiforgery-id","x-ms-client-request-id","x-ms-client-session-id","SubscriptionPool"],f=function(){return{startCollectors:function(){if(!this.collectorsRegistered){if(window.addEventListener)window.addEventListener("mousemove",this.MouseEventCallBack,!0),window.addEventListener("load",this.LoadTimeCallBack,!0);else if("undefined"!=typeof document&&document.attachEvent)document.attachEvent("onmousemove",this.MouseEventCallBack),document.attachEvent("onload",this.LoadTimeCallBack);else{if("undefined"==typeof module)throw new Error("Can't attach events for entropy collection");console.log("Can't attach events for entropy collection")}this.collectorsRegistered=1}},stopCollectors:function(){this.collectorsRegistered&&(window.removeEventListener?(window.removeEventListener("mousemove",this.MouseEventCallBack,1),window.removeEventListener("load",this.LoadTimeCallBack,1)):window.detachEvent&&(window.detachEvent("onmousemove",this.MouseEventCallBack),window.detachEvent("onload",this.LoadTimeCallBack)),this.collectorsRegistered=0)},MouseEventCallBack:function(e){var t=(new Date).valueOf(),n=e.x||e.clientX||e.offsetX||0,o=e.y||e.clientY||e.offsetY||0,i=[255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,255&o,o>>8&255];r(i)},LoadTimeCallBack:function(){var e=(new Date).valueOf(),t=[255&e,e>>8&255,e>>16&255,e>>24&255];r(t)}}}();return{init:function(){if(e(),!c&&!a)try{f.startCollectors()}catch(r){}},reseed:function(e){s.reseed(e)},read:function(r){if(!u)throw new Error("Entropy pool is not initialized.");var t=s.getBytes(r);return e(),t}}}var o={};o.register=function(e,r,t){o[e]||(o[e]={});var n=o[e];n[r]||(n[r]=t)},o.exists=function(e,r){return o[e]&&o[e][r]?!0:!1};var i=function(){if("undefined"!=typeof document)try{throw new Error}catch(e){if(e.stack){var r=/\w+:\/\/(.+?\/)*.+\.js/.exec(e.stack);return r&&r.length>0?r[0]:null}}else if("undefined"!=typeof self)return self.location.href;return null}(),a=!1,s="undefined"!=typeof Worker,u="undefined"!=typeof importScripts,c="undefined"!=typeof Uint8Array,l=function(){try{return Object.defineProperty({},"oncomplete",{}),!0}catch(e){return!1}}(),f=s,y=function(e,r,t,n,o){if(!l)return void(e[r]=t);var i={};n&&(i.get=n),o&&(i.set=o),Object.defineProperty(e,r,i)},h={},g=function(){function e(e,r){var t="";if(r||(r=!1),(e.pop||e.subarray)&&(e=String.fromCharCode.apply(null,e)),b)t=btoa(e);else{var n,o,i,a,s,u,c,l;for(l=0;l<e.length;l+=3)n=e.charCodeAt(l),o=e.charCodeAt(l+1),i=e.charCodeAt(l+2),a=n>>2,s=(3&n)<<4|o>>4,u=(15&o)<<2|i>>6,c=63&i,isNaN(o)?u=c=64:isNaN(i)&&(c=64),t=t+w.charAt(a)+w.charAt(s)+w.charAt(u)+w.charAt(c)}return r?t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,""):t}function r(e){if(b){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4!==0;)e+="=";return atob(e)}return String.fromCharCode.apply(null,t(e))}function t(e){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4!==0;)e+="=";var r,t,n,o,i,a,s,u,c=[];for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),u=0;u<e.length;u+=4)o=w.indexOf(e.charAt(u)),i=w.indexOf(e.charAt(u+1)),a=w.indexOf(e.charAt(u+2)),s=w.indexOf(e.charAt(u+3)),r=o<<2|i>>4,t=(15&i)<<4|a>>2,n=(3&a)<<6|s,c.push(r),64!==a&&c.push(t),64!==s&&c.push(n);return c}function n(e){return Object.prototype.toString.call(e).slice(8,-1)}function o(e,r){var t="";"undefined"==typeof r&&(r=!1);for(var n=0;n<e.length;n++){r&&n%4===0&&0!==n&&(t+="-");var o=e[n].toString(16).toUpperCase();1===o.length&&(t+="0"),t+=o}return t}function i(e,r){return r=r||0,e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]}function a(e){for(var r=new Array(e.length),t=0;t<r.length;t++)r[t]=e.charCodeAt(t);return r}function s(e){e=e.replace(/\-/g,"");for(var r=[];e.length>=2;)r.push(parseInt(e.substring(0,2),16)),e=e.substring(2,e.length);return r}function u(e){var r={};for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function c(e,r,n){var o,i=t(e),a=[];if(isNaN(r))return i;for(o=0;o<i.length;o+=r)a.push(i.slice(o,o+r));if(n)for(o=0;o<a.length;o++)a[o]=(a[o][0]<<24)+(a[o][1]<<16)+(a[o][2]<<8)+a[o][3];return a}function l(e){return[e>>>24&255,e>>>16&255,e>>>8&255,255&e]}function f(e){for(var r=[],t=0;t<e.length;t++)r=r.concat(l(e[t]));return r}function y(e,r){for(var t=Math.min(e.length,r.length),n=new Array(t),o=0;t>o;o+=1)n[o]=e[o]^r[o];return n}function h(e,r){r||(r=0);for(var t=new Array(e),n=0;e>n;n+=1)t[n]=r;return t}function g(e){return e?e.pop?e:(e.isView&&(e=Uint8Array(e)),1===e.length?[e[0]]:Array.apply(null,e)):[]}function p(e,r,t){for(;e.length<t;)e.push(r);return e}function d(e,r,t){for(;e.length<t;)e.unshift(r);return e}function v(e,r){var t=!0;e.length!==r.length&&(t=!1);
for(var n=0;n<e.length;n++)e[n]!==r[n]&&(t=!1);return t}function m(e){if("Array"!==n(e))return!1;for(var r,t=0;t<e.length;t++)if(r=e[t],isNaN(r)||0>r||r>255)return!1;return!0}var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b="undefined"!=typeof btoa;return{toBase64:e,base64ToString:r,base64ToBytes:t,getObjectType:n,bytesToHexString:o,bytesToInt32:i,stringToBytes:a,unpackData:c,hexToBytesArray:s,int32ToBytes:l,int32ArrayToBytes:f,toArray:g,arraysEqual:v,clone:u,xorVectors:y,padEnd:p,padFront:d,getVector:h,verifyByteArray:m}}(),p=function(){function e(e){return u&&self.postMessage(e),e}return{jsCryptoRunner:function(r){var t,n=r.data.operationType;if(!o.exists(n,r.data.algorithm.name))throw new Error("unregistered algorithm.");var i=o[n][r.data.algorithm.name],a=r.data;return"process"===a.operationSubType?(i(a),t=e({type:"process"})):t=e(i(a)),t}}}();u&&(self.onmessage=function(e){if(e.data.prngSeed){var r=e.data.prngSeed;return void q.init(r)}p.jsCryptoRunner(e)});var d=function(){function e(e){for(var r=[],t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return 0===r[r.length-1]&&r.pop(),r}function r(e){var r=e.algorithm.name.slice(0,3).toLowerCase();return"rsa"===r?"RSA":"ecd"===r?"EC":"oct"}function t(e,t){var n={};if(n.kty=r(e),n.ext=e.extractable,n.alg=a[e.algorithm.name.toLowerCase()](e.algorithm),n.key_ops=e.keyUsage,t.pop)n.k=i.toBase64(t,!0);else for(var o in t)t[o].pop&&(n[o]=i.toBase64(t[o],!0));return e.algorithm.namedCurve&&(n.crv=e.algorithm.namedCurve),n}function n(t,n){var o={};if(o.kty=r(t),o.extractable=t.extractable,n.pop)o.k=i.toBase64(n,!0);else for(var a in n)n[a].pop&&(o[a]=i.toBase64(n[a],!0));t.algorithm.namedCurve&&(o.crv=t.algorithm.namedCurve);var s=JSON.stringify(o,null,"	");return e(s)}function o(e,r,t){for(var n=JSON.parse(JSON.stringify(e)),o=0;o<t.length;o+=1){var a=n[t[o]];a&&(n[t[o]]=i.base64ToBytes(a))}return n}var i=g,a={hmac:function(e){return"HS"+e.hash.name.substring(e.hash.name.indexOf("-")+1)},"aes-cbc":function(e){return"A"+e.length.toString()+"CBC"},"aes-gcm":function(e){return"A"+e.length.toString()+"GCM"},"rsaes-pkcs1-v1_5":function(e){return"RSA1_5"},"rsassa-pkcs1-v1_5":function(e){return"RS"+e.hash.name.substring(e.hash.name.indexOf("-")+1)},"rsa-oaep":function(e){return"RS-OAEP-"+e.hash.name.substring(e.hash.name.indexOf("-")+1)},"rsa-pss":function(e){return"PS-"+e.hash.name.substring(e.hash.name.indexOf("-")+1)},ecdsa:function(e){return"EC-"+e.namedCurve.substring(e.namedCurve.indexOf("-")+1)}};return{keyToJwkOld:n,keyToJwk:t,jwkToKey:o}}(),v=v||e(),m=m||r(),w={name:"P-256",type:0,p:[255,255,255,255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255],a:[255,255,255,255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,252],b:[90,198,53,216,170,58,147,231,179,235,189,85,118,152,134,188,101,29,6,176,204,83,176,246,59,206,60,62,39,210,96,75],order:[255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,188,230,250,173,167,23,158,132,243,185,202,194,252,99,37,81],gx:[107,23,209,242,225,44,66,71,248,188,230,229,99,164,64,242,119,3,125,129,45,235,51,160,244,161,57,69,216,152,194,150],gy:[79,227,66,226,254,26,127,155,142,231,235,74,124,15,158,22,43,206,51,87,107,49,94,206,203,182,64,104,55,191,81,245],cf:1},b={name:"P-384",type:0,p:[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,255,255,0,0,0,0,0,0,0,0,255,255,255,255],a:[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,255,255,0,0,0,0,0,0,0,0,255,255,255,252],b:[179,49,47,167,226,62,231,228,152,142,5,107,227,248,45,25,24,29,156,110,254,129,65,18,3,20,8,143,80,19,135,90,198,86,57,141,138,46,209,157,42,133,200,237,211,236,42,239],order:[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,199,99,77,129,244,55,45,223,88,26,13,178,72,176,167,122,236,236,25,106,204,197,41,115],gx:[170,135,202,34,190,139,5,55,142,177,199,30,243,32,173,116,110,29,59,98,139,167,155,152,89,247,65,224,130,84,42,56,85,2,242,93,191,85,41,108,58,84,94,56,114,118,10,183],gy:[54,23,222,74,150,38,44,111,93,158,152,191,146,146,220,41,248,244,29,189,40,154,20,124,233,218,49,19,181,240,184,192,10,96,177,206,29,126,129,157,122,67,29,124,144,234,14,95],cf:1},k={name:"P-521",type:0,p:[16,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],a:[16,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,252],b:[81,149,62,185,97,142,28,154,31,146,154,33,160,182,133,64,238,162,218,114,91,153,179,21,243,184,180,137,145,142,241,144,225,86,25,57,81,236,126,147,123,22,82,192,189,59,177,191,112,53,115,223,136,61,44,52,241,239,69,31,212,107,80,63,0],order:[16,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,250,81,134,135,131,191,47,150,107,127,204,16,72,247,144,165,208,59,181,201,184,137,156,71,174,187,111,183,30,145,56,100,144],gx:[198,133,142,96,183,64,64,233,205,158,62,203,102,35,149,180,66,156,100,129,57,80,63,181,33,248,40,175,96,107,77,61,186,161,75,94,119,239,231,89,40,254,29,193,39,162,255,168,222,51,72,179,193,133,106,66,155,249,126,126,49,194,229,189,102],gy:[16,24,57,41,106,120,154,59,192,64,92,138,95,180,44,125,27,217,152,245,68,73,87,155,68,104,23,175,189,23,39,62,102,44,151,238,114,153,94,244,38,64,197,80,185,16,63,173,112,97,53,60,112,134,162,114,194,64,136,190,148,118,159,209,102,80],cf:1};"undefined"!=typeof m&&(m.curves["P-256"]=w,m.curves["P-384"]=b,m.curves["P-521"]=k);var x={name:"BN-254",type:0,p:[37,35,100,130,64,0,0,1,186,52,77,128,0,0,0,8,97,33,0,0,0,0,0,19,167,0,0,0,0,0,0,19],a:[0],b:[2],order:[37,35,100,130,64,0,0,1,186,52,77,128,0,0,0,7,255,159,128,0,0,0,0,16,161,0,0,0,0,0,0,13],gx:[37,35,100,130,64,0,0,1,186,52,77,128,0,0,0,8,97,33,0,0,0,0,0,19,167,0,0,0,0,0,0,18],gy:[1],cf:1};"undefined"!=typeof m&&(m.curves["BN-254"]=x);var M={info:["numsp256d1",256,256,256],type:0,p:[67,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),a:[64,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),b:[129,85,2].reverse(),order:[37,168,81,71,41,32,171,32,96,92,38,234,117,130,60,228,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),gx:[177,172,26,178,30,238,82,188,58,199,212,3,9,155,87,131,9,203,66,79,160,149,122,41,97,219,170,90,182,214,158,188].reverse(),gy:[159,222,132,33,203,185,181,128,187,15,49,21,209,195,85,201,53,224,4,126,247,139,68,115,166,182,153,51,241,192,143,208].reverse(),cf:1},E={info:["numsp256t1",256,255,256],name:"numsp256t1",type:1,p:[67,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),a:[1],d:[85,195,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),order:[245,74,221,238,144,177,71,26,155,67,89,47,165,90,149,65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64].reverse(),gx:[218,19,237,46,144,192,222,160,134,53,8,227,14,138,57,12,214,155,32,105,95,61,30,205,125,35,234,106,251,20,117,138].reverse(),gy:[230,137,138,121,231,22,166,47,211,110,133,16,216,97,95,113,16,128,75,166,217,101,150,206,199,37,217,217,159,62,213,68].reverse(),cf:4},D={info:["numsp384d1",384,384,384],name:"numsp384d1",type:0,p:[195,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),a:[192,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),b:[187,119,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),order:[185,97,14,123,246,129,77,96,122,226,55,76,61,157,218,190,129,104,93,235,30,175,30,214,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),gx:[42,21,152,32,4,186,156,235,123,196,97,15,16,237,46,82,66,199,108,42,27,41,189,243,244,249,129,251,205,193,37,2,166,241,5,65,34,202,128,72,28,24,111,177,240,86,121,117].reverse(),gy:[22,7,24,102,236,184,116,92,38,173,244,191,219,180,214,188,126,131,26,18,125,131,32,185,156,115,127,248,119,105,4,176,126,207,132,5,48,61,227,215,56,142,155,225,104,227,222,172].reverse(),cf:1},T={info:["numsp384t1",384,382,384],name:"numsp384t1",type:1,p:[195,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),a:[1],d:[159,209,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255].reverse(),order:[125,137,163,230,196,220,185,32,121,200,53,171,90,85,228,97,207,225,107,180,28,26,71,226,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,63].reverse(),gx:[222,107,32,108,228,64,213,80,19,148,69,101,177,146,242,111,64,99,49,243,168,255,99,87,0,76,190,229,70,244,11,179,181,93,229,154,18,162,182,192,108,38,169,69,251,17,177,97].reverse(),gy:[146,147,114,240,225,3,141,157,220,72,236,70,249,176,114,0,75,150,69,246,247,152,15,131,86,95,66,241,116,130,173,22,215,13,177,35,164,177,56,135,176,238,166,185,103,62,152,130].reverse(),cf:4};"undefined"!=typeof m&&(m.curves.NUMSP256D1=M,m.curves.NUMSP384D1=D,m.curves.NUMSP256T1=E,m.curves.NUMSP384T1=T);var I=function(e,r,t,n,o,i,a){function s(e){for(var r=Math.floor(e.length/o),t=0;r>t;t++)i(e,t,p,n,d);return m+=r,e.slice(r*o)}function u(){for(var e=[],r=0;r<p.length;r++)e=e.concat(h.int32ToBytes(p[r]));return e.length=a/8,e}function c(e){var r=o-e.length%o;o/8>=r&&(r+=o);var t=h.getVector(r);t[0]=128;var n=8*(e.length+m*o);return t[r-4]=n>>>24&255,t[r-3]=n>>>16&255,t[r-2]=n>>>8&255,t[r-1]=255&n,e.concat(t)}function l(e){return v=s(e),y()}function f(e){v=v.concat(e),v.length>=o&&(v=s(v))}function y(){if(0!==s(c(v)).length)throw new Error("buffer.length !== 0");var e=u();return v=[],p=t.slice(),m=0,e}var h=g,p=t.slice(),d=new Array(o),v=[],m=0;return{name:e,computeHash:l,process:f,finish:y,der:r,hashLen:a,maxMessageSize:4294967295}},A=function(){function e(e,t,n,o,i){var a,s,u,c,l=64,f=4294967295,y=n[0],h=n[1],g=n[2],p=n[3],d=n[4];for(s=0;16>s;s++)i[s]=r.bytesToInt32(e,t*l+4*s);for(a=16;80>a;a++)c=i[a-3]^i[a-8]^i[a-14]^i[a-16],i[a]=c<<1|c>>>31;for(s=0;80>s;s++)u=y<<5|y>>>27,u+=s>=60?h^g^p:s>=40?h&g^h&p^g&p:s>=20?h^g^p:h&g^~h&p,u+=d+o[s]+i[s],d=p,p=g,g=h<<30|h>>>2,h=y,y=u;return n[0]+=y&f,n[1]+=h&f,n[2]+=g&f,n[3]+=p&f,n[4]+=d&f,n}var r=g,t=r.unpackData,n=t("Z0UjAe/Nq4mYutz+EDJUdsPS4fA=",4,1),o=t("WoJ5mVqCeZlagnmZWoJ5mVqCeZlagnmZWoJ5mVqCeZlagnmZWoJ5mVqCeZlagnmZWoJ5mVqCeZlagnmZWoJ5mVqCeZlagnmZWoJ5mVqCeZlu2euhbtnroW7Z66Fu2euhbtnroW7Z66Fu2euhbtnroW7Z66Fu2euhbtnroW7Z66Fu2euhbtnroW7Z66Fu2euhbtnroW7Z66Fu2euhbtnroY8bvNyPG7zcjxu83I8bvNyPG7zcjxu83I8bvNyPG7zcjxu83I8bvNyPG7zcjxu83I8bvNyPG7zcjxu83I8bvNyPG7zcjxu83I8bvNyPG7zcymLB1spiwdbKYsHWymLB1spiwdbKYsHWymLB1spiwdbKYsHWymLB1spiwdbKYsHWymLB1spiwdbKYsHWymLB1spiwdbKYsHWymLB1spiwdY",4,1),i=t("MCEwCQYFKw4DAhoFAAQU");return{sha1:I("SHA-1",i,n,o,64,e,160)}}();"undefined"!=typeof o&&(A.hash=function(e){return"process"===e.operationSubType?void A.sha1.process(e.buffer):"finish"===e.operationSubType?A.sha1.finish():A.sha1.computeHash(e.buffer)},o.register("digest","sha-1",A.hash)),h["sha-1"]=A.sha1;var K=function(){function e(e,r,t,n,o){var i,s,u,c,l,f=64,y=4294967295,h=t[0],g=t[1],p=t[2],d=t[3],v=t[4],m=t[5],w=t[6],b=t[7];for(s=0;16>s;s++)o[s]=a.bytesToInt32(e,r*f+4*s);for(i=16;64>i;i++)c=o[i-15],l=o[i-2],o[i]=((l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10)+o[i-7]+((c>>>7|c<<25)^(c>>>18|c<<14)^c>>>3)+o[i-16],o[i]=o[i]&y;for(s=0;64>s;s++)u=b+((v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&m^~v&w)+n[s]+o[s],d+=u,u+=((h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+(h&(g^p)^g&p),b=w,w=m,m=v,v=d,d=p,p=g,g=h,h=u;return t[0]+=h&y,t[1]+=g&y,t[2]+=p&y,t[3]+=d&y,t[4]+=v&y,t[5]+=m&y,t[6]+=w&y,t[7]+=b&y,t}var r,t,n,o,i,a=g,s=a.unpackData;return t=s("wQWe2DZ81QcwcN0X9w5ZOf/ACzFoWBURZPmPp776T6Q",4,1),n=s("agnmZ7tnroU8bvNypU/1OlEOUn+bBWiMH4PZq1vgzRk",4,1),r=s("QoovmHE3RJG1wPvP6bXbpTlWwltZ8RHxkj+CpKscXtXYB6qYEoNbASQxhb5VDH3Dcr5ddIDesf6b3AanwZvxdOSbacHvvkeGD8GdxiQMocwt6SxvSnSEqlywqdx2+YjamD5RUqgxxm2wAyfIv1l/x8bgC/PVp5FHBspjURQpKWcntwqFLhshOE0sbfxTOA0TZQpzVHZqCruBwskuknIshaK/6KGoGmZLwkuLcMdsUaPRkugZ1pkGJPQONYUQaqBwGaTBFh43bAgnSHdMNLC8tTkcDLNO2KpKW5zKT2gub/N0j4LueKVjb4TIeBSMxwIIkL7/+qRQbOu++aP3xnF48g",4,1),o=s("MC0wDQYJYIZIAWUDBAIEBQAEHA"),i=s("MDEwDQYJYIZIAWUDBAIBBQAEIA"),{sha224:I("SHA-224",o,t,r,64,e,224),sha256:I("SHA-256",i,n,r,64,e,256)}}();"undefined"!=typeof o&&(K.hash256=function(e){return"process"===e.operationSubType?void K.sha256.process(e.buffer):"finish"===e.operationSubType?K.sha256.finish():K.sha256.computeHash(e.buffer)},K.hash224=function(e){return"process"===e.operationSubType?void K.sha224.process(e.buffer):"finish"===e.operationSubType?K.sha224.finish():K.sha224.computeHash(e.buffer)},o.register("digest","sha-224",K.hash224),o.register("digest","sha-256",K.hash256)),h["sha-224"]=K.sha224,h["sha-256"]=K.sha256;var S=function(){function e(e,r,t,n,o){var i=r+n|0,a=n>>>0>i>>>0;o[0]=e+t+a|0,o[1]=i}function r(r,t,n,o,i){var a,s,u,c,l,f,y,h,g,p=128,d=[],v=[],m=[],w=n[0],b=n[1],k=n[2],x=n[3],M=n[4],E=n[5],D=n[6],T=n[7],I=n[8],A=n[9],K=n[10],S=n[11],B=n[12],P=n[13],C=n[14],F=n[15];for(a=0;32>a;a++)g=t*p+4*a,i[a]=r.slice(g,g+4),i[a]=i[a][0]<<24|i[a][1]<<16|i[a][2]<<8|i[a][3];for(a=32;160>a;a+=2)y=i[a-30],h=i[a-29],u=(y>>>1|h<<31)^(y>>>8|h<<24)^y>>>7,c=(h>>>1|y<<31)^(h>>>8|y<<24)^(h>>>7|y<<25),y=i[a-4],h=i[a-3],l=(y>>>19|h<<13)^(h>>>29|y<<3)^y>>>6,f=(h>>>19|y<<13)^(y>>>29|h<<3)^(h>>>6|y<<26),e(l,f,i[a-14],i[a-13],d),e(u,c,d[0],d[1],d),e(i[a-32],i[a-31],d[0],d[1],d),i[a]=d[0],i[a+1]=d[1];for(s=0;160>s;s+=2)u=(I>>>14|A<<18)^(I>>>18|A<<14)^(A>>>9|I<<23),c=(A>>>14|I<<18)^(A>>>18|I<<14)^(I>>>9|A<<23),l=I&K^B&~I,f=A&S^P&~A,e(C,F,u,c,d),e(l,f,o[s],o[s+1],v),e(d[0],d[1],i[s],i[s+1],m),e(v[0],v[1],m[0],m[1],m),e(m[0],m[1],D,T,d),D=d[0],T=d[1],c=(b>>>28|w<<4)^(w>>>2|b<<30)^(w>>>7|b<<25),u=(w>>>28|b<<4)^(b>>>2|w<<30)^(b>>>7|w<<25),f=b&(x^E)^x&E,l=w&(k^M)^k&M,e(m[0],m[1],u,c,d),u=d[0],c=d[1],e(l,f,u,c,d),u=d[0],c=d[1],C=B,F=P,B=K,P=S,K=I,S=A,I=D,A=T,D=M,T=E,M=k,E=x,k=w,x=b,w=u,b=c;return e(n[0],n[1],w,b,d),n[0]=d[0],n[1]=d[1],e(n[2],n[3],k,x,d),n[2]=d[0],n[3]=d[1],e(n[4],n[5],M,E,d),n[4]=d[0],n[5]=d[1],e(n[6],n[7],D,T,d),n[6]=d[0],n[7]=d[1],e(n[8],n[9],I,A,d),n[8]=d[0],n[9]=d[1],e(n[10],n[11],K,S,d),n[10]=d[0],n[11]=d[1],e(n[12],n[13],B,P,d),n[12]=d[0],n[13]=d[1],e(n[14],n[15],C,F,d),n[14]=d[0],n[15]=d[1],n}var t,n,o,i,a,s,u,c=g,l=c.unpackData;return t=l("y7udXcEFnthimikqNnzVB5FZAVowcN0XFS/s2PcOWTlnMyZn/8ALMY60SodoWBUR2wwuDWT5j6dHtUgdvvpPpA==",4,1),n=l("agnmZ/O8yQi7Z66FhMqnOzxu83L+lPgrpU/1Ol8dNvFRDlJ/reaC0ZsFaIwrPmwfH4PZq/tBvWtb4M0ZE34heQ",4,1),o=l("QoovmNcoriJxN0SRI+9lzbXA+8/sTTsv6bXbpYGJ27w5VsJb80i1OFnxEfG2BdAZkj+CpK8ZT5urHF7V2m2BGNgHqpijAwJCEoNbAUVwb74kMYW+TuSyjFUMfcPV/7Ticr5ddPJ7iW+A3rH+OxaWsZvcBqclxxI1wZvxdM9pJpTkm2nBnvFK0u++R4Y4TyXjD8GdxouM1bUkDKHMd6ycZS3pLG9ZKwJ1SnSEqm6m5INcsKncvUH71Hb5iNqDEVO1mD5RUu5m36uoMcZtLbQyELADJ8iY+yE/v1l/x77vDuTG4AvzPaiPwtWnkUeTCqclBspjUeADgm8UKSlnCg5ucCe3CoVG0i/8LhshOFwmySZNLG38WsQq7VM4DROdlbPfZQpzVIuvY952agq7PHeyqIHCyS5H7a7mknIshRSCNTuiv+ihTPEDZKgaZku8QjABwkuLcND4l5HHbFGjBlS+MNGS6BnW71IY1pkGJFVlqRD0DjWFV3EgKhBqoHAyu9G4GaTBFrjS0MgeN2wIUUGrUydId0zfjuuZNLC8teGbSKg5HAyzxclaY07YqkrjQYrLW5zKT3dj43NoLm/z1rK4o3SPgu5d77L8eKVjb0MXL2CEyHgUofCrcozHAggaZDnskL7/+iNjHiikUGzr3oK96b75o/eyxnkVxnF48uNyUyvKJz7O6iZhnNGGuMchwMIH6tp91s3g6x71fU9/7m7ReAbwZ6pyF2+6CmN9xaLImKYRP5gEvvkNrhtxCzUTHEcbKNt39SMEfYQyyqt7QMckkzyevgoVyb68Qx1nxJwQDUxMxdS+yz5Ctll/KZz8ZX4qX8tvqzrW+uxsRBmMSkdYFw==",4,1),i=l("MEEwDQYJYIZIAWUDBAICBQAEMA"),a=l("MFEwDQYJYIZIAWUDBAIDBQAEQA"),s=l("MC0wDQYJYIZIAWUDBAIFBQAEHA"),u=l("MDEwDQYJYIZIAWUDBAIGBQAEIA"),{sha384:I("SHA-384",i,t,o,128,r,384),sha512:I("SHA-512",a,n,o,128,r,512),sha512_224:I("SHA-512.224",s,n,o,128,r,224),sha512_256:I("SHA-512.256",u,n,o,128,r,256)}}();"undefined"!=typeof o&&(S.hash384=function(e){return"process"===e.operationSubType?void S.sha384.process(e.buffer):"finish"===e.operationSubType?S.sha384.finish():S.sha384.computeHash(e.buffer)},S.hash512=function(e){return"process"===e.operationSubType?void S.sha512.process(e.buffer):"finish"===e.operationSubType?S.sha512.finish():S.sha512.computeHash(e.buffer)},o.register("digest","sha-384",S.hash384),o.register("digest","sha-512",S.hash512)),h["sha-384"]=S.sha384,h["sha-512"]=S.sha512;var B=function(){function e(e,r){for(var t=new Array(e),n=0;n<e.length;n++)t[n]=e[n]^r[n];return t}function r(e,r){for(var t=e.slice(),n=e.length;r>n;n++)t.push(0);return t}function t(){return y.length===f?y:y.length>f?r(l.computeHash(y),f):r(y,f)}function n(r){var n,o;if(d)l.process(r);else{h=new Array(f),g=new Array(f);for(var i=0;f>i;i++)h[i]=54,g[i]=92;d=t(),n=e(d,h),p=e(d,g),o=n.concat(r),l.process(o)}}function o(){var e=l.finish(),r=p.concat(e);return l.computeHash(r)}function i(){y=null,l=null,d=null}function a(e){switch(e.toLowerCase()){case"sha-1":if(void 0===c)throw new Error("Sha1 object not found");l=c.sha1,f=64;break;case"sha-224":l=s.sha224,f=64;break;case"sha-256":l=s.sha256,f=64;break;case"sha-384":if(void 0===u)throw new Error("Sha512 object not found");l=u.sha384,f=128;break;case"sha-512":if(void 0===u)throw new Error("Sha512 object not found");l=u.sha512,f=128;break;default:throw new Error("unsupported hash alorithm (sha-224, sha-256, sha-384, sha-512)")}}var s,u,c;"undefined"!=typeof K&&(s=K),"undefined"!=typeof S&&(u=S),"undefined"!=typeof A&&(c=A);var l,f,y,h,g,p,d=null;return{computeHmac:function(e,r,t){y=r,a(t),n(e);var s=o();return i(),s},process:function(e,r,t){l||(y=r,a(t)),n(e)},finish:function(e,r){l||(y=e,a(r),n([]));var t=o();return i(),t}}}();"undefined"!=typeof o&&(B.signHmac=function(e){var r=e.algorithm.hash.name;return"process"===e.operationSubType?void B.process(e.buffer,e.keyData,r):"finish"===e.operationSubType?B.finish(e.keyData,r):B.computeHmac(e.buffer,e.keyData,r)},B.verifyHmac=function(e){var r=e.algorithm.hash.name;return"process"===e.operationSubType?void B.process(e.buffer,e.keyData,r):"finish"===e.operationSubType?g.arraysEqual(B.finish(e.keyData,r),e.signature):g.arraysEqual(B.computeHmac(e.buffer,e.keyData,r),e.signature)},B.generateKey=function(e){var r=e.algorithm.length,t={"sha-256":32,"sha-384":48,"sha-512":64};return r||(r=t[e.algorithm.hash.name.toLowerCase()]),{type:"keyGeneration",keyData:q.getBytes(r),keyHandle:{algorithm:e.algorithm,extractable:e.extractable,keyUsage:e.keyUsage,type:"secret"}}},B.importKey=function(e){var r=d.jwkToKey(e.keyData,e.algorithm,["k"]);return r.alg=r.alg.replace("HS","sha-"),{type:"keyImport",keyData:r.k,keyHandle:{algorithm:{name:"hmac",hash:{name:r.alg}},extractable:e.extractable||r.extractable,keyUsage:e.keyUsage,type:"secret"}}},B.exportKey=function(e){var r=d.keyToJwk(e.keyHandle,e.keyData);return{type:"keyExport",keyHandle:r}},o.register("importKey","hmac",B.importKey),o.register("exportKey","hmac",B.exportKey),o.register("generateKey","hmac",B.generateKey),o.register("sign","hmac",B.signHmac),o.register("verify","hmac",B.verifyHmac));var P=function(){var e,r,t,n,o,i,a,s,u,c;return{aes:function(l){e||(e=g.unpackData("AAIEBggKDA4QEhQWGBocHiAiJCYoKiwuMDI0Njg6PD5AQkRGSEpMTlBSVFZYWlxeYGJkZmhqbG5wcnR2eHp8foCChIaIioyOkJKUlpianJ6goqSmqKqsrrCytLa4ury+wMLExsjKzM7Q0tTW2Nrc3uDi5Obo6uzu8PL09vj6/P4bGR8dExEXFQsJDw0DAQcFOzk/PTMxNzUrKS8tIyEnJVtZX11TUVdVS0lPTUNBR0V7eX99c3F3dWtpb21jYWdlm5mfnZORl5WLiY+Ng4GHhbu5v72zsbe1q6mvraOhp6Xb2d/d09HX1cvJz83DwcfF+/n//fPx9/Xr6e/t4+Hn5QADBgUMDwoJGBseHRQXEhEwMzY1PD86OSgrLi0kJyIhYGNmZWxvaml4e359dHdycVBTVlVcX1pZSEtOTURHQkHAw8bFzM/Kydjb3t3U19LR8PP29fz/+vno6+7t5Ofi4aCjpqWsr6qpuLu+vbS3srGQk5aVnJ+amYiLjo2Eh4KBm5idnpeUkZKDgIWGj4yJiquora6npKGis7C1tr+8ubr7+P3+9/Tx8uPg5ebv7Onqy8jNzsfEwcLT0NXW39zZ2ltYXV5XVFFSQ0BFRk9MSUpraG1uZ2RhYnNwdXZ/fHl6Ozg9Pjc0MTIjICUmLywpKgsIDQ4HBAECExAVFh8cGRoADhwSODYkKnB+bGJIRlRa4O788tjWxMqQnoyCqKa0utvVx8nj7f/xq6W3uZOdj4E7NScpAw0fEUtFV1lzfW9hraOxv5WbiYfd08HP5ev5901DUV91e2lnPTMhLwULGRd2eGpkTkBSXAYIGhQ+MCIslpiKhK6gsrzm6Pr03tDCzEFPXVN5d2VrMT8tIwkHFRuhr72zmZeFi9HfzcPp5/X7mpSGiKKsvrDq5Pb40tzOwHp0ZmhCTF5QCgQWGDI8LiDs4vD+1NrIxpySgI6kqri2DAIQHjQ6KCZ8cmBuREpYVjc5KyUPARMdR0lbVX9xY23X2cvF7+Hz/aepu7WfkYONAA0aFzQ5LiNoZXJ/XFFGS9Ddysfk6f7zuLWir4yBlpu7tqGsj4KVmNPeycTn6v3wa2ZxfF9SRUgDDhkUNzotIG1gd3pZVENOBQgfEjE8Kya9sKeqiYSTntXYz8Lh7Pv21tvMweLv+PW+s6SpioeQnQYLHBEyPyglbmN0eVpXQE3a18DN7uP0+bK/qKWGi5yRCgcQHT4zJClib3h1VltMQWFse3ZVWE9CCQQTHj0wJyqxvKumhYifktnUw87t4Pf6t7qtoIOOmZTf0sXI6+bx/GdqfXBTXklEDwIVGDs2ISwMARYbODUiL2RpfnNQXUpH3NHGy+jl8v+0ua6jgI2alwALFh0sJzoxWFNORXR/Ymmwu6atnJeKgejj/vXEz9LZe3BtZldcQUojKDU+DwQZEsvA3dbn7PH6k5iFjr+0qaL2/eDr2tHMx66luLOCiZSfRk1QW2phfHceFQgDMjkkL42Gm5Chqre81d7DyPny7+Q9NisgERoHDGVuc3hJQl9U9/zh6tvQzcavpLmyg4iVnkdMUVprYH12HxQJAjM4JS6Mh5qRoKu2vdTfwsn48+7lPDcqIRAbBg1kb3J5SENeVQEKFxwtJjswWVJPRHV+Y2ixuqesnZaLgOni//TFztPYenFsZ1ZdQEsiKTQ/DgUYE8rB3Nfm7fD7kpmEj761qKMACRIbJC02P0hBWlNsZX53kJmCi7S9pq/Y0crD/PXu5zsyKSAfFg0Ec3phaFdeRUyrormwj4adlOPq8fjHztXcdn9kbVJbQEk+NywlGhMIAebv9P3Cy9DZrqe8tYqDmJFNRF9WaWB7cgUMFx4hKDM63dTPxvnw6+KVnIeOsbijquzl/vfIwdrTpK22v4CJkpt8dW5nWFFKQzQ9Ji8QGQIL197FzPP64eiflo2Eu7KpoEdOVVxjanF4DwYdFCsiOTCak4iBvrespdLbwMn2/+TtCgMYES4nPDVCS1BZZm90faGos7qFjJee6eD78s3E39YxOCMqFRwHDnlwa2JdVE9GY3x3e/Jrb8UwAWcr/terdsqCyX36WUfwrdSir5ykcsC3/ZMmNj/3zDSl5fFx2DEVBMcjwxiWBZoHEoDi6yeydQmDLBobblqgUjvWsynjL4RT0QDtIPyxW2rLvjlKTFjP0O+q+0NNM4VF+QJ/UDyfqFGjQI+SnTj1vLbaIRD/89LNDBPsX5dEF8Snfj1kXRlzYIFP3CIqkIhG7rgU3l4L2+AyOgpJBiRcwtOsYpGV5HnnyDdtjdVOqWxW9Opleq4IunglLhymtMbo3XQfS72LinA+tWZIA/YOYTVXuYbBHZ7h+JgRadmOlJseh+nOVSjfjKGJDb/mQmhBmS0PsFS7FlIJatUwNqU4v0CjnoHz1/t84zmCmy//hzSOQ0TE3unLVHuUMqbCIz3uTJULQvrDTgguoWYo2SSydluiSW2L0SVy+PZkhmiYFtSkXMxdZbaSbHBIUP3tudpeFUZXp42dhJDYqwCMvNMK9+RYBbizRQbQLB6Pyj8PAsGvvQMBE4prOpERQU9n3OqX8s/O8LTmc5asdCLnrTWF4vk36Bx1325H8RpxHSnFiW+3Yg6qGL4b/FY+S8bSeSCa28D+eM1a9B/dqDOIB8cxsRIQWSeA7F9gUX+pGbVKDS3lep+TyZzvoOA7Ta4q9bDI67s8g1OZYRcrBH66d9Ym4WkUY1UhDH2NAQIECBAgQIAbNmzYq02aL168Y8aXNWrUs33678WROXLk071hwp8lSpQzZsyDHTp06MuNAQIECBAgQIAbNmzYq02aL168Y8aXNWrUs33678WROXLk071hwp8lSpQzZsyDHTp06MuNAQIECBAgQIAbNmzYq02aL168Y8aXNWrUs33678WROXLk071hwp8lSpQzZsyDHTp06MuNAQIECBAgQIAbNmzYq02aL168Y8aXNWrUs33678WROXLk071hwp8lSpQzZsyDHTp06MuNAQIECBAgQIAbNmzYq02aL168Y8aXNWrUs33678WROXLk071hwp8lSpQzZsyDHTp06MuN",256,!1),r=e[0],t=e[1],n=e[2],o=e[3],i=e[4],a=e[5],s=e[6],u=e[7],c=e[8]);var f,y,h,p,d=128,v=4;switch(8*l.length){case 128:f=128,y=4,h=10;break;case 192:f=192,y=6,h=12;break;case 256:f=256,y=8,h=14;break;default:throw new Error("Unsupported keyLength")}var m=function(e){var r=e[1];e[1]=e[5],e[5]=e[9],e[9]=e[13],e[13]=r,r=e[2],e[2]=e[10],e[10]=r,r=e[6],e[6]=e[14],e[14]=r,r=e[15],e[15]=e[11],e[11]=e[7],e[7]=e[3],e[3]=r},w=function(e){var r=e[13];e[13]=e[9],e[9]=e[5],e[5]=e[1],e[1]=r,r=e[10],e[10]=e[2],e[2]=r,r=e[14],e[14]=e[6],e[6]=r,r=e[3],e[3]=e[7],e[7]=e[11],e[11]=e[15],e[15]=r},b=function(e){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],y=e[9],h=e[10],g=e[11],p=e[12],d=e[13],v=e[14],m=e[15];e[0]=r[n]^t[o]^i^a,e[1]=n^r[o]^t[i]^a,e[2]=n^o^r[i]^t[a],e[3]=t[n]^o^i^r[a],e[4]=r[s]^t[u]^c^l,e[5]=s^r[u]^t[c]^l,e[6]=s^u^r[c]^t[l],e[7]=t[s]^u^c^r[l],e[8]=r[f]^t[y]^h^g,e[9]=f^r[y]^t[h]^g,e[10]=f^y^r[h]^t[g],e[11]=t[f]^y^h^r[g],e[12]=r[p]^t[d]^v^m,e[13]=p^r[d]^t[v]^m,e[14]=p^d^r[v]^t[m],e[15]=t[p]^d^v^r[m]},k=function(e){var r=e[0],t=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],y=e[7],h=e[8],g=e[9],p=e[10],d=e[11],v=e[12],m=e[13],w=e[14],b=e[15];e[0]=n[r]^i[t]^o[s]^a[u],e[1]=a[r]^n[t]^i[s]^o[u],e[2]=o[r]^a[t]^n[s]^i[u],e[3]=i[r]^o[t]^a[s]^n[u],e[4]=n[c]^i[l]^o[f]^a[y],e[5]=a[c]^n[l]^i[f]^o[y],e[6]=o[c]^a[l]^n[f]^i[y],e[7]=i[c]^o[l]^a[f]^n[y],e[8]=n[h]^i[g]^o[p]^a[d],e[9]=a[h]^n[g]^i[p]^o[d],e[10]=o[h]^a[g]^n[p]^i[d],e[11]=i[h]^o[g]^a[p]^n[d],e[12]=n[v]^i[m]^o[w]^a[b],e[13]=a[v]^n[m]^i[w]^o[b],e[14]=o[v]^a[m]^n[w]^i[b],e[15]=i[v]^o[m]^a[w]^n[b]},x=function(e,r){return[e[0]^r[0],e[1]^r[1],e[2]^r[2],e[3]^r[3]]},M=function(e,r,t){for(var n=0;n<e.length;n+=1)e[n]^=r[n+t]},E=function(e){var r=e[0];e[0]=e[1],e[1]=e[2],e[2]=e[3],e[3]=r},D=function(e){for(var r=0;r<e.length;r+=1)e[r]=s[e[r]]},T=function(e){for(var r=0;r<e.length;r+=1)e[r]=u[e[r]]},I=function(e,r){return[e[4*r],e[4*r+1],e[4*r+2],e[4*r+3]]},A=function(e,r,t,n){e[4*t]=r[4*n],e[4*t+1]=r[4*n+1],e[4*t+2]=r[4*n+2],e[4*t+3]=r[4*n+3]},K=function(e){for(var r,t=[],n=0;4*y>n;)t.push(e[n++]);for(n=y;v*(h+1)>n;){if(r=I(t,n-1),n%y===0){var o=n/y,i=[c[o],0,0,0];E(r),D(r),r=x(r,i)}else y>6&&n%y===4&&D(r);var a=x(I(t,n-y),r);A(t,a,n,0),n+=1}return t};return p=K(l),{encrypt:function(e){var r,t=e;for(M(t,p,0),r=1;h-1>=r;r+=1)D(t),m(t),b(t),M(t,p,4*r*v);return D(t),m(t),M(t,p,4*h*v),t},decrypt:function(e){var r,t=e;for(M(t,p,4*h*v),r=h-1;r>=1;r-=1)w(t),T(t),M(t,p,4*r*v),k(t);return w(t),T(t),M(t,p,0),t},clear:function(){},keyLength:f,blockSize:d}}}}(),C=C||{};C.pkcsv7=function(e){function r(r){var t=r.length-1>=0?r.length-1:0,n=r[t],o=n.length,i=o===e;if(i){var a,s=[];for(a=0;e>a;a+=1)s.push(e);r.push(s)}else for(var u=e-o&255;n.length!==e;)n.push(u)}function t(r){var t=!0;r.length%e!==0&&(t=!1);for(var n=r.slice(-e),o=n[n.length-1],i=0;e>i;i++){var a=o>=e-i,s=n[i]===o;t=(a?s:!0)&&t}var u=t?o:0;return r.length-=u,t}return{pad:r,unpad:t}};var F=function(e){function r(e){var r=[];c=c.concat(e);for(var t=Math.floor(c.length/a),n=0;t>n;n++)r.push(c.slice(n*a,(n+1)*a));return c=c.slice(t*a),r}function t(r){for(var t,n=[],o=0;o<r.length;o++)t=g.xorVectors(i,r[o]),n.push(e.encrypt(t)),i=n[o];return n}function n(r){for(var t,n,o=[],a=0;a<r.length;a+=1)t=r[a].slice(0,r[a].length),n=e.decrypt(t),o.push(g.xorVectors(i,n)),i=r[a];return o}function o(){c=[],l=[],i=null}var i,a=e.blockSize/8,s=C.pkcsv7(a),u=function(e){var r,t,n=[];for(r=0;r<e.length;r+=1){var o=e[r];for(t=0;t<o.length;t+=1)n.push(o[t])}return n},c=[],l=[];return{init:function(e){if(e.length!==a)throw new Error("Invalid iv size");i=e.slice()},encrypt:function(e){return this.processEncrypt(e),this.finishEncrypt()},processEncrypt:function(e){var n=t(r(e));l=l.concat(u(n))},finishEncrypt:function(){var e=1===c.length?[[c[0]]]:[c];s.pad(e);var r=l.concat(u(t(e)));return o(),r},decrypt:function(e){return this.processDecrypt(e),this.finishDecrypt()},processDecrypt:function(e){var t=n(r(e));l=l.concat(u(t))},finishDecrypt:function(){var e=l;s.unpad(e);return o(),e}}},H=null;"undefined"!=typeof o&&(F.workerEncrypt=function(e){var r;return H||(H=F(P.aes(e.keyData)),H.init(e.algorithm.iv)),"process"===e.operationSubType?void H.processEncrypt(e.buffer):"finish"===e.operationSubType?(r=H.finishEncrypt(),H=null,r):(r=H.encrypt(e.buffer),H=null,r)},F.workerDecrypt=function(e){var r;return H||(H=F(P.aes(e.keyData)),H.init(e.algorithm.iv)),"process"===e.operationSubType?void H.processDecrypt(e.buffer):"finish"===e.operationSubType?(r=H.finishDecrypt(),H=null,r):(r=H.decrypt(e.buffer),H=null,r)},F.generateKey=function(e){if(e.algorithm.length%8!==0)throw new Error;return{type:"keyGeneration",keyData:q.getBytes(Math.floor(e.algorithm.length/8)),keyHandle:{algorithm:e.algorithm,extractable:e.extractable,keyUsage:e.keyUsage,type:"secret"}}},F.importKey=function(e){var r=d.jwkToKey(e.keyData,e.algorithm,["k"]);return e.algorithm.length=8*r.k.length,{type:"keyImport",keyData:r.k,keyHandle:{algorithm:e.algorithm,extractable:e.extractable||r.extractable,keyUsage:e.keyUsage,type:"secret"}}},F.exportKey=function(e){var r=d.keyToJwk(e.keyHandle,e.keyData);return{type:"keyExport",keyHandle:r}},o.register("importKey","aes-cbc",F.importKey),o.register("exportKey","aes-cbc",F.exportKey),o.register("generateKey","aes-cbc",F.generateKey),o.register("encrypt","aes-cbc",F.workerEncrypt),o.register("decrypt","aes-cbc",F.workerDecrypt));var z,U=function(e){function r(e,r){for(var t,o=Math.floor(r.length/16),i=0;o>i;i++)t=r.slice(16*i,16*i+16),A=n(D.xorVectors(A,t),e);return K=r.slice(16*o),A}function t(){var e=16*Math.ceil(B/16)-B,t=u(8*b.length),n=u(8*B),o=K.concat(D.getVector(e)).concat(t).concat(n);return r(I,o)}function n(e,r){for(var t,n=D.getVector(16),a=r.slice(),s=[225,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0;128>u;u++)t=i(e,u),1===t&&(n=D.xorVectors(n,a)),1&a[15]?(o(a),a=D.xorVectors(a,s)):o(a);return n}function o(e){for(var r=e.length-1;r>0;r--)e[r]=(1&e[r-1])<<7|e[r]>>>1;return e[0]=e[0]>>>1,e}function i(e,r){var t=Math.floor(r/8);return e[t]>>7-r%8&1}function a(e){for(var r=256,t=1;4>=t;t++)r=(r>>>8)+e[e.length-t],e[e.length-t]=255&r;return e}function s(r,t){var n,o=Math.ceil(t.length/16),i=[];E!==r&&(E=r.slice());for(var s=0;o>s;s++){n=t.slice(16*s,16*s+16);var u=e.encrypt(E.slice());i=i.concat(D.xorVectors(n,u)),E=a(E)}return i}function u(e){return[0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]}function c(e){var r=16*Math.ceil(b.length/16)-b.length;return e.concat(D.getVector(r))}function l(){B=0,T=[],S=[],A=D.getVector(16),K=[],E=w=b=null}function f(e,t,n){if(b=t||[],k=isNaN(n)?128:n,k%8!==0)throw new Error("DataError");if(w=e,12===w.length)x=w.concat([0,0,0,1]);else{var o=16*Math.ceil(w.length/16)-w.length;x=r(I,w.concat(D.getVector(o+8)).concat(u(8*w.length))),A=D.getVector(16)}M=a(x.slice()),r(I,c(b))}function y(e){B=e.length;var n=s(M,e);r(I,n);var o=t(),i=s(x,o).slice(0,k/8);return l(),n.slice().concat(i)}function h(e,n){B=e.length;var o=s(M,e);r(I,e);var i=t(),a=s(x,i).slice(0,k/8);return l(),D.arraysEqual(a,n)?o:null}function p(e){T=T.concat(e);var t=T.slice(0,16*Math.floor(T.length/16));B+=t.length,T=T.slice(t.length);var n=s(E||M,t);S=S.concat(n),r(I,n)}function d(e){T=T.concat(e);var t=T.slice(0,16*Math.floor((T.length-k/8)/16));B+=t.length,T=T.slice(t.length);var n=s(E||M,t);S=S.concat(n),r(I,t)}function v(){var e=s(E,T);S=S.concat(e),B+=T.length;var r=t(),n=s(x,r).slice(0,k/8),o=S.slice().concat(n);return l(),o}function m(){var e=Math.floor(k/8),r=T.slice(-e);T=T.slice(0,T.length-e);var n=s(E,T);S=S.concat(n),B+=T.length;var o=t(),i=s(x,o).slice(0,k/8),a=S.slice();if(l(),D.arraysEqual(i,r))return a;throw new Error("OperationError")}var w,b,k,x,M,E,D=g,T=[],I=e.encrypt(D.getVector(16)),A=D.getVector(16),K=[],S=[],B=0;return{init:f,encrypt:y,decrypt:h,processEncrypt:p,processDecrypt:d,finishEncrypt:v,finishDecrypt:m}};"undefined"!=typeof o&&(U.encrypt=function(e){var r;return z||(z=U(P.aes(e.keyData)),z.init(e.algorithm.iv,e.algorithm.additionalData,e.algorithm.tagLength)),"process"===e.operationSubType?void z.processEncrypt(e.buffer):"finish"===e.operationSubType?(r=z.finishEncrypt(),z=null,r):(r=z.encrypt(e.buffer),z=null,r)},U.decrypt=function(e){var r;if(z||(z=U(P.aes(e.keyData)),z.init(e.algorithm.iv,e.algorithm.additionalData,e.algorithm.tagLength)),"process"===e.operationSubType)return void z.processDecrypt(e.buffer);if("finish"===e.operationSubType)return r=z.finishDecrypt(),z=null,r;var t=Math.floor(e.algorithm.tagLength/8),n=e.buffer.slice(0,e.buffer.length-t),o=e.buffer.slice(-t);return r=z.decrypt(n,o),z=null,r},U.generateKey=function(e){if(e.algorithm.length%8!==0)throw new Error;return{type:"keyGeneration",keyData:q.getBytes(Math.floor(e.algorithm.length/8)),keyHandle:{algorithm:e.algorithm,extractable:e.extractable,
keyUsage:e.keyUsage,type:"secret"}}},U.importKey=function(e){var r=d.jwkToKey(e.keyData,e.algorithm,["k"]);return{type:"keyImport",keyData:r.k,keyHandle:{algorithm:e.algorithm,extractable:e.extractable||r.extractable,keyUsage:e.keyUsage,type:"secret"}}},U.exportKey=function(e){var r=d.keyToJwk(e.keyHandle,e.keyData);return{type:"keyExport",keyHandle:r}},o.register("importKey","aes-gcm",U.importKey),o.register("exportKey","aes-gcm",U.exportKey),o.register("generateKey","aes-gcm",U.generateKey),o.register("encrypt","aes-gcm",U.encrypt),o.register("decrypt","aes-gcm",U.decrypt));var q=new t,L=function(e){function r(e){var r=v.digitsToBytes(e);return i.padFront(r,0,u),r}function t(e,r,t){var n=v.bytesToDigits(r),o=v.IntegerGroup(t),i=o.createElementFromBytes(e),a=o.modexp(i,n);return a.m_digits}function n(n){var o=t(n,e.d,e.n);return r(o)}function o(t){var n=e.p,o=e.q,i=e.dp,a=e.dq,s=e.qi,u=v.bytesToDigits(n),c=v.bytesToDigits(o),l=new Array(u.length+c.length),f=new Array(u.length+1),y=new Array(c.length+1),h=v.bytesToDigits(t);v.reduce(h,u,l),v.modExp(l,v.bytesToDigits(i),u,f),v.reduce(h,c,l),v.modExp(l,v.bytesToDigits(a),c,y);var g=v.subtract(f,y,l);return 0!==g&&v.subtract(y,f,l),v.modMul(l,v.bytesToDigits(s),u,h),0!==g&&v.subtract(u,h,h),v.multiply(h,c,l),v.add(y,l,f),r(f)}var i=g,a=e.hasOwnProperty("n")&&e.hasOwnProperty("d"),s=e.hasOwnProperty("p")&&e.hasOwnProperty("q"),u=e.n.length;return{encrypt:function(n){return r(t(n,e.e,e.n))},decrypt:function(e){if(s)return o(e);if(a)return n(e);throw new Error("missing private key")}}},N={mgf1:function(e,r,t){var n,o,i,a=[],s=t.hashLen/8;for(i=0;i<=Math.floor(r/s);i+=1)n=[i>>>24&255,i>>>16&255,i>>>8&255,255&i],o=t.computeHash(e.concat(n)),a=a.concat(o);return a.slice(0,r)},checkMessageVsMaxHash:function(e,r){if(e.length>(r.maxMessageSize||4294967295))throw new Error("message too long")}},j=j||{};j.oaep=function(e,r){function t(e,t){var n,s,u,c,l,f,y,h,g,p;if(e.length>a-2*(r.hashLen/8)-2)throw new Error("Message too long.");return t||(t=[]),n=r.computeHash(t),s=a-e.length-2*n.length-2,u=o.getVector(s),c=n.concat(u,[1],e),l=i.getBytes(n.length),f=N.mgf1(l,a-n.length-1,r),y=o.xorVectors(c,f),h=N.mgf1(y,n.length,r),g=o.xorVectors(l,h),p=[0].concat(g).concat(y),e=p.slice(),p}function n(e,t){var n,i,s,u,c,l,f,y;if(t||(t=[]),n=r.computeHash(t),0!==e[0])throw new Error("Encryption Error");if(i=e.slice(1,n.length+1),s=e.slice(n.length+1),u=N.mgf1(s,n.length,r),c=o.xorVectors(i,u),l=N.mgf1(c,a-n.length-1,r),f=o.xorVectors(s,l),y=f.slice(0,n.length),!o.arraysEqual(n,y))throw new Error("Encryption Error");f=f.slice(n.length);var h=f.indexOf(1);return f.slice(h+1)}var o=g,i=q,a=e.n.length;if(null===r)throw new Error("must supply hashFunction");return{pad:function(e,r){return t(e,r)},unpad:function(e,r){return n(e,r)}}};var j=j||{};j.pkcs1Encrypt=function(e){function r(e){var r;if(e.length>o-11)throw new Error("message too long");return r=n.getNonZeroBytes(o-e.length-3),[0,2].concat(r,[0],e)}function t(e){var r;for(r=1;r<e.length&&0!==e[r];r+=1);return e.slice(r+1)}var n=q,o=e.n.length;return{pad:function(e){return r(e)},unpad:function(e){return t(e)}}},j.pkcs1Sign=function(e,r){function t(e){var t,i,a;if(i=r.computeHash(e.slice()),t=r.der.concat(i),a=t.length,a+11>o)throw new Error("intended encoded message length too short");return[0,1].concat(n.getVector(o-a-3,255),[0],t)}var n=g,o=e.n.length;return{sign:function(e){return t(e)},verify:function(e,r){var o=t(r);return n.arraysEqual(e,o)}}};var j=j||{};j.pss=function(e,r){function t(t,n,a){var s=8*e.n.length-1,u=Math.ceil(s/8),c=r.computeHash(t);if(n=a?a.length:n||c.length,u<c.length+n+2)throw new Error("encoding error");a=a||i.getBytes(n);for(var l=[0,0,0,0,0,0,0,0].concat(c,a),f=r.computeHash(l),y=o.getVector(u-a.length-f.length-2),h=y.concat([1],a),g=N.mgf1(f,u-f.length-1,r),p=o.xorVectors(h,g),d=0,v=0;8-(8*u-s)>v;v++)d+=1<<v;p[0]&=d;var m=p.concat(f,[188]);return m}function n(t,n,i){var a=8*e.n.length-1,s=Math.ceil(a/8),u=r.computeHash(n),c=u.length;if(i=i||c,c+i+2>s)return!1;var l=t.slice(0,s-c-1),f=t.slice(l.length,l.length+c),y=N.mgf1(f,s-c-1,r),h=o.xorVectors(l,y);h[0]&=255>>>8-(8*s-a);for(var g=0;s-c-i-2>g;g++)if(0!==h[g])return!1;if(1!==h[s-c-i-2])return!1;var p=h.slice(-i),d=[0,0,0,0,0,0,0,0].concat(u,p),v=r.computeHash(d);return o.arraysEqual(v,f)}var o=g,i=q;return{sign:function(e,r,n){return t(e,r,n)},verify:function(e,r,t){return n(e,r,t)}}};var W=function(e,r,t){function n(){if(!t||!t.computeHash)throw new Error("missing hash function")}var o=L(e);if(!r)throw new Error("padding mode");var i,a=null,s=null;switch(r){case"rsaes-pkcs1-v1_5":i=j.pkcs1Encrypt(e);break;case"rsassa-pkcs1-v1_5":n(),i=j.pkcs1Sign(e,t);break;case"rsa-oaep":n(),i=j.oaep(e,t);break;case"rsa-pss":n(),i=j.pss(e,t);break;case"raw":i={pad:function(e){return e},unpad:function(e){return e}};break;default:throw new Error("invalid mode")}i&&(a=i.pad||i.sign,s=i.unpad||i.verify);var u={encrypt:function(e,r){var t;return t=null!==a?a(e,r):e.slice(),o.encrypt(t)},decrypt:function(e,r){var t=o.decrypt(e);return t=null!==s?s(t,r):t.slice(0)},signData:function(e,r,t){return o.decrypt(a(e,r,t))},verifySignature:function(e,r,t){var n=o.encrypt(e);return s(n,r,t)},mode:r};return u};"undefined"!=typeof o&&(W.sign=function(e){var r,t=e.algorithm.hash.name,n=h[t.toLowerCase()],o=e.algorithm.saltLength,i=e.algorithm.salt;return r=W(e.keyData,e.algorithm.name,n),r.signData(e.buffer,o,i)},W.verify=function(e){var r,t=e.algorithm.hash.name,n=h[t.toLowerCase()],o=e.algorithm.saltLength;return r=W(e.keyData,e.algorithm.name,n),r.verifySignature(e.signature,e.buffer,o)},W.workerEncrypt=function(e){var r,t,n,o;switch(e.algorithm.name){case"rsaes-pkcs1-v1_5":t=W(e.keyData,e.algorithm.name),r=t.encrypt(e.buffer);break;case"rsa-oaep":if(o=e.algorithm.hash.name,!o)throw new Error("unsupported hash algorithm");n=h[o.toLowerCase()],t=W(e.keyData,e.algorithm.name,n),r=t.encrypt(e.buffer);break;default:throw new Error("unsupported algorithm")}return r},W.workerDecrypt=function(e){var r,t,n;switch(e.algorithm.name){case"rsaes-pkcs1-v1_5":t=W(e.keyData,e.algorithm.name),r=t.decrypt(e.buffer);break;case"rsa-oaep":var o=e.algorithm.hash.name;if(!o)throw new Error("unsupported hash algorithm");n=h[o.toLowerCase()],t=W(e.keyData,e.algorithm.name,n),r=t.decrypt(e.buffer);break;default:throw new Error("unsupported algorithm")}return r},W.importKey=function(e){var r=d.jwkToKey(e.keyData,e.algorithm,["n","e","d","q","p","dq","dp","qi"]);return{type:"keyImport",keyData:r,keyHandle:{algorithm:e.algorithm,extractable:e.extractable||r.extractable,keyUsage:e.keyUsage,type:r.d||r.dq?"private":"public"}}},W.exportKey=function(e){var r=d.keyToJwk(e.keyHandle,e.keyData);return{type:"keyExport",keyHandle:r}},o.register("sign","rsassa-pkcs1-v1_5",W.sign),o.register("sign","rsa-pss",W.sign),o.register("verify","rsassa-pkcs1-v1_5",W.verify),o.register("verify","rsa-pss",W.verify),o.register("encrypt","rsa-oaep",W.workerEncrypt),o.register("encrypt","rsaes-pkcs1-v1_5",W.workerEncrypt),o.register("decrypt","rsa-oaep",W.workerDecrypt),o.register("decrypt","rsaes-pkcs1-v1_5",W.workerDecrypt),o.register("importKey","rsa-oaep",W.importKey),o.register("importKey","rsaes-pkcs1-v1_5",W.importKey),o.register("importKey","rsassa-pkcs1-v1_5",W.importKey),o.register("importKey","rsa-pss",W.importKey),o.register("exportKey","rsa-oaep",W.exportKey),o.register("exportKey","rsaes-pkcs1-v1_5",W.exportKey),o.register("exportKey","rsassa-pkcs1-v1_5",W.exportKey),o.register("exportKey","rsa-pss",W.exportKey));var O=function(e){function r(r,n,o){for(var i=Math.ceil(o/(e.hashLen/8)),a=1,s=r.concat(n),u=[],c=0;i>c;c++){var l=t.int32ToBytes(a++).concat(s),f=e.computeHash(l);u=u.concat(f)}return u.slice(0,o)}var t=g;return{deriveKey:r}},V=null;"undefined"!=typeof o&&(O.deriveKey=function(e){var r=g,t=e.algorithm.hash.name,n=h[t.toLowerCase()];V=O(n);var o=e.algorithm,i=r.toArray(o.algorithmId).concat(r.toArray(o.partyUInfo),r.toArray(o.partyVInfo),r.toArray(o.publicInfo),r.toArray(o.privateInfo)),a=V.deriveKey(e.keyData,i,e.derivedKeyType.length);return V=null,{type:"keyDerive",keyData:a,keyHandle:{algorithm:e.derivedKeyType,extractable:e.extractable,keyUsage:e.keyUsage,type:"secret"}}},O.deriveBits=function(e){var r=e.algorithm.hash.name,t=h[r.toLowerCase()];V=O(t);var n=e.algorithm,o=n.algorithmId.concat(n.partyUInfo,n.partyVInfo,n.publicInfo||[],n.privateInfo||[]),i=V.deriveKey(e.keyData,o,e.length);return V=null,i},o.register("deriveKey","concat",O.deriveKey),o.register("deriveBits","concat",O.deriveBits));var Z=function(e){function r(r){var t=[],n=q.getBytes(e.order.length*v.DIGIT_NUM_BYTES);n=r||n,v.reduce(v.bytesToDigits(n),a.order,t);var o=a.allocatePointStorage();return s.scalarMultiply(t,a.generator,o),{privateKey:{x:i(o.x),y:i(o.y),d:i(t)},publicKey:{x:i(o.x),y:i(o.y)}}}function t(e,r,t){var n=new m.EllipticCurvePointFp(a,!1,o(r.x),o(r.y),null,!1);n.isInMontgomeryForm||s.convertToMontgomeryForm(n),n.isAffine||s.convertToAffineForm(n);var i=a.allocatePointStorage();s.convertToJacobianForm(i),s.convertToMontgomeryForm(i),s.scalarMultiply(o(e.d),n,i),s.convertToAffineForm(i),s.convertToStandardForm(i);var u=v.digitsToBytes(i.x);if(t&&8*u.length<t)throw new Error("DataError");return t?u.slice(0,t/8):u}function n(e){a.generator.isInMontgomeryForm||s.convertToMontgomeryForm(a.generator);var r=a.allocatePointStorage();return s.convertToJacobianForm(r),s.convertToMontgomeryForm(r),s.scalarMultiply(o(e),a.generator,r),{x:i(r.x),y:i(r.y)}}var o=v.bytesToDigits,i=v.digitsToBytes,a=e,s=new m.EllipticCurveOperatorFp(e);return{generateKey:r,deriveBits:t,computePublicKey:n}},Q=null;"undefined"!=typeof o&&(Z.deriveBits=function(e){var r=m.createCurve(e.algorithm.namedCurve.toUpperCase()),t=e.keyData,n=e.additionalKeyData;Q=Z(r);var o=Q.deriveBits(t,n,e.length);return o},Z.generateKey=function(e){var r=m.createCurve(e.algorithm.namedCurve.toUpperCase());Q=Z(r);var t=Q.generateKey();return{type:"keyPairGeneration",keyPair:{publicKey:{keyData:t.publicKey,keyHandle:{algorithm:e.algorithm,extractable:e.extractable,keyUsage:e.keyUsage,type:"public"}},privateKey:{keyData:t.privateKey,keyHandle:{algorithm:e.algorithm,extractable:e.extractable,keyUsage:e.keyUsage,type:"private"}}}}},Z.importKey=function(e){var r=d.jwkToKey(e.keyData,e.algorithm,["x","y","d","crv"]);if(r.d&&(!r.x||!r.y)){var t=m.createCurve(e.algorithm.namedCurve.toUpperCase());Q=Z(t);var n=Q.computePublicKey(r.d);r.x=n.x,r.y=n.y}return{type:"keyImport",keyData:r,keyHandle:{algorithm:e.algorithm,extractable:e.extractable||r.extractable,keyUsage:e.keyUsage,type:r.d?"private":"public"}}},Z.exportKey=function(e){var r=d.keyToJwk(e.keyHandle,e.keyData);return{type:"keyExport",keyHandle:r}},o.register("importKey","ecdh",Z.importKey),o.register("exportKey","ecdh",Z.exportKey),o.register("generateKey","ecdh",Z.generateKey),o.register("deriveBits","ecdh",Z.deriveBits));var J=function(e){function r(e){return t(s(e))}function t(r){var t=e.allocatePointStorage();return c.scalarMultiply(r,e.generator,t),{publicKey:t,privateKey:r}}function n(r){var n=[];return r||(r=q.getBytes(e.order.length*v.DIGIT_NUM_BYTES)),v.reduce(v.bytesToDigits(r),e.order,n),t(n)}function o(r){r.length>l&&(r.length=l);var t=s(r);if(f){var n=8-e.rbits%8;v.shiftRight(t,t,n)}return v.reduce(t,e.order,t),t}function i(r,t,i){i||(i=n());var a=i.publicKey.x,c=i.privateKey,f=s(r.d),y=o(t.slice()),h=[],g=[],p=null;return v.reduce(a,e.order,a),v.modMul(a,f,e.order,h),v.add(h,y,h),v.reduce(h,e.order,h),v.modInv(c,e.order,g),v.modMul(h,g,e.order,h),p=u(a,!0,l).concat(u(h,!0,l))}function a(r,t,n){var i=Math.floor(t.length/2),a=s(t.slice(0,i)),u=s(t.slice(i)),l=o(n.slice()),y=[],h=[],g=new m.EllipticCurvePointFp(e,!1,s(r.x),s(r.y),null,!1);v.modInv(u,e.order,u),v.modMul(l,u,e.order,y),v.modMul(a,u,e.order,h);var p=e.allocatePointStorage(),d=e.allocatePointStorage();return f?(v.add(y,y,y),v.add(y,y,y),v.reduce(y,e.order,y),c.scalarMultiply(y,e.generator,p,!1),c.scalarMultiply(h,g,d,!1),c.convertToExtendedProjective(p),c.convertToExtendedProjective(d),c.add(d,p,p),c.normalize(p)):(c.scalarMultiply(y,e.generator,p),c.scalarMultiply(h,g,d),c.convertToJacobianForm(p),c.convertToMontgomeryForm(p),c.convertToMontgomeryForm(d),c.mixedAdd(p,d,p),c.convertToAffineForm(p),c.convertToStandardForm(p)),p.isInfinity?!1:(v.reduce(p.x,e.order,p.x),0===v.compareDigits(p.x,a))}var s=v.bytesToDigits,u=v.digitsToBytes,c=new m.EllipticCurveOperatorFp(e),l=u(e.order).length,f=1===e.type;return{createKey:r,generateKey:n,sign:i,verify:a}};"undefined"!=typeof o&&(J.sign=function(e){var r=e.algorithm.hash.name,t=m.createCurve(e.algorithm.namedCurve.toUpperCase()),n=h[r.toLowerCase()],o=n.computeHash(e.buffer),i=J(t);return i.sign(e.keyData,o)},J.verify=function(e){var r=e.algorithm.hash.name,t=m.createCurve(e.algorithm.namedCurve.toUpperCase()),n=h[r.toLowerCase()],o=n.computeHash(e.buffer),i=J(t);return i.verify(e.keyData,e.signature,o)},J.generateKey=function(e){function r(e){return g.padFront(e,0,8*Math.ceil(e.length/8))}var t=m.createCurve(e.algorithm.namedCurve.toUpperCase()),n=J(t),o=n.generateKey(),i=v.digitsToBytes,a=r(i(o.publicKey.x)),s=r(i(o.publicKey.y)),u=r(i(o.privateKey));return{type:"keyPairGeneration",keyPair:{publicKey:{keyData:{x:a,y:s},keyHandle:{algorithm:e.algorithm,extractable:e.extractable,keyUsage:e.keyUsage,type:"public"}},privateKey:{keyData:{x:a,y:s,d:u},keyHandle:{algorithm:e.algorithm,extractable:e.extractable,keyUsage:e.keyUsage,type:"private"}}}}},J.importKey=function(e){var r=d.jwkToKey(e.keyData,e.algorithm,["x","y","d","crv"]);if(r.d&&(!r.x||!r.y)){var t=J.curves[e.algorithm.namedCurve](),n=J(t),o=n.computePublicKey(r.d);r.x=o.x,r.y=o.y}return{type:"keyImport",keyData:r,keyHandle:{algorithm:e.algorithm,extractable:e.extractable||r.extractable,keyUsage:e.keyUsage,type:r.d?"private":"public"}}},J.exportKey=function(e){var r=d.keyToJwk(e.keyHandle,e.keyData);return{type:"keyExport",keyHandle:r}},o.register("sign","ecdsa",J.sign),o.register("verify","ecdsa",J.verify),o.register("generateKey","ecdsa",J.generateKey),o.register("importKey","ecdsa",J.importKey),o.register("exportKey","ecdsa",J.exportKey));var G;u||(G=function(){function e(){function e(e){try{("encrypt"==e.operationType||"decrypt"==e.operationType)&&(e.operationSubType="process",p.jsCryptoRunner({data:e}),e.operationSubType="finish"),r=p.jsCryptoRunner({data:e})}catch(t){return void this.onerror({data:t.description,type:"error"})}e.operationSubType&&"process"===e.operationSubType||this.onmessage({data:r})}var r;return{postMessage:e,onmessage:null,onerror:null,terminate:function(){}}}function r(e){function r(r){return"error"===r.type?void(i&&i.apply(n,[r.message?r.message:r])):(this.result=e(r.data),void o.apply(n,[this.result]))}var t,n,o,i;return n=new Promise(function(e,r){o=e,i=r}),t={dispatchEvent:r,promise:n,result:null}}function t(){function e(e){switch(e.type){case"keyGeneration":case"keyImport":case"keyDerive":return d.add(e.keyHandle,e.keyData),e.keyHandle;case"keyExport":return e.keyHandle;case"keyPairGeneration":return d.add(e.keyPair.publicKey.keyHandle,e.keyPair.publicKey.keyData),d.add(e.keyPair.privateKey.keyHandle,e.keyPair.privateKey.keyData),{publicKey:e.keyPair.publicKey.keyHandle,privateKey:e.keyPair.privateKey.keyHandle};default:throw new Error("Unknown key operation")}}return r(e)}function n(e){function t(e){return e=a(e)}var n=r(t);return n.process=function(r){e.operationSubType="process",e.buffer=m.toArray(r),v.continueJob(this,m.clone(e))},n.finish=function(){e.operationSubType="finish",e.buffer=[],v.continueJob(this,m.clone(e))},n.abort=function(){v.abortJob(this)},n.onabort=null,n.onprogress=null,n.algorithm=e.algorithm||null,n.key=e.keyHandle||null,n}function a(e){return c&&e.pop?new Uint8Array(e).buffer:e}function u(e,r){if(!o.exists(e,r))throw new Error("unsupported algorithm")}function l(e){var r=d.lookup(e);if(!r)throw new Error("key not found");return r}function y(e,r){for(var t={operationType:e},n=b[e],o=0;o<n.length;o+=1){var i=w[n[o]],a=r[o];if(a){if(a.subarray&&(a=m.toArray(a)),"ArrayBuffer"==m.getObjectType(a)&&(a=m.toArray(a)),g.getObjectType(a)!==i.type)throw new Error(i.name);"algorithm"===i.name&&(a.name=a.name.toLowerCase(),a.iv&&(a.iv=m.toArray(a.iv)),a.salt&&(a.salt=m.toArray(a.salt)),a.additionalData&&(a.additionalData=m.toArray(a.additionalData)),a.hash&&!a.hash.name&&"String"===g.getObjectType(a.hash)&&(a.hash={name:a.hash})),t.hasOwnProperty(i.name)?t[i.name+"1"]=a:t[i.name]=a}else if(i.required)throw new Error(i.name)}return t}function h(e,r,o){var i=y(e,r);u(e,i.algorithm.name),i.keyHandle&&(i.keyData=l(i.keyHandle)),i.keyHandle1&&(i.keyData1=l(i.keyHandle1)),i.algorithm&&i.algorithm["public"]&&(i.additionalKeyData=l(i.algorithm["public"]));var a=o?t(i):n(i);return(o||i.buffer||"deriveBits"===e||"wrapKey"===e)&&v.runJob(a,i),a.promise}window.Promise||(window.Promise=function(e,r){function t(e){for(var r=0;r<a.length;r++){var t=a[r](e);t&&t.then?t.then(u[r],s[r]):u[r]&&u[r](t)}o={result:e}}if(!(this instanceof Promise))throw new Error("use 'new' keyword with Promise constructor");var n=null,o=null,i=[],a=[],s=[],u=[];this.then=function(e,r){var t;return n?(t=e(n.result),t&&t.then?t:Promise.resolve(t)):o?(t=r?r(o.result):o.result,t&&t.then?t:Promise.resolve(t)):(i.push(e),r&&a.push(r),new Promise(function(e,r){u.push(e),s.push(r)}))},this["catch"]=function(e){var r;return o?(r=e(o.result),r&&r.then?r:Promise.resolve(r)):(a.push(e),new Promise(function(e,r){u.push(e),s.push(r)}))};var c=function(e){for(var r=0;r<i.length;r++){var t=i[r](e);t&&t.then?t.then(u[r]):u[r]&&u[r](t)}n={result:e}};e(c,t)},window.Promise.all=function(e){function r(r,o){return function(i){t[r]=i,++n==e.length&&o(t)}}var t=[],n=0,o=new Promise(function(t,n){for(var o=0;o<e.length;o++)e[o].then(r(o,t)),e[o]["catch"](function(e){n(e)})});return o},window.Promise.race=function(e){function r(e){return function(r){t||(t=!0,e(r))}}var t=!1,n=new Promise(function(t,n){for(var o=0;o<e.length;o++)e[o].then(r(t),r(n))});return n},window.Promise.reject=function(e){return new Promise(function(r,t){t(e)})},window.Promise.resolve=function(e){return new Promise(function(r,t){r(e)})});var d=[];d.add=function(e,r){d.push({keyHandle:e,keyData:r})},d.remove=function(e){for(var r=0;r<d.length;r++)if(d[r].keyHandle===e)return void(d=d.splice(r,1))},d.lookup=function(e){for(var r=0;r<d.length;r++)if(d[r].keyHandle===e)return d[r].keyData;return null};var v=function(){function r(){t(!f);for(var e=0;e<w.length;e++)if(!w[e].busy)return w[e];return null}function t(e){for(var r=w.length-1;r>=0;r-=1)w[r].isWebWorker===e&&(w[r].terminate(),w.splice(r,1))}function n(){for(var e=0,r=0;r<w.length;r++)w[r].busy||(e+=1);return e}function o(e){w.push(e)}function a(e){for(var r=0;r<w.length;r++)if(w[r]===e)return e.terminate(),void w.splice(r,1)}function u(e){for(var r=0;r<w.length;r++)if(w[r].operation===e)return w[r];return null}function c(e,r){b.push({operation:e,data:r,id:x++})}function l(e){if(e.busy=!1,e.operation=null,f)if(b.length>0){var r=b.shift();p(r.operation,r.data)}else n()>m&&a(e)}function y(r){var t;if(f)try{t=new Worker(i),t.postMessage({prngSeed:q.getBytes(48)}),t.isWebWorker=!0}catch(n){f=!1,k.forceSync=!0,t=e(),t.isWebWorker=!1}else t=e(),t.isWebWorker=!1;return t.operation=r,t.busy=!1,t.onmessage=function(e){for(var r=t.operation,n=0;n<b.length;n++)if(b[n].operation===t.operation){var o=b[n];return b.splice(n,1),void d(t,o.data)}r&&"process"!==e.data.type&&(l(t),r.dispatchEvent(e))},t.onerror=function(e){var r=t.operation;l(t),r.dispatchEvent(e)},o(t),t}function h(e){var r=u(e);r&&a(r)}function g(e,t){var n=null;if(f=s&&!k.forceSync,n=r(),f&&null===n&&w.length>=v)return void c(e,t);if(null===n&&(n=y(e)),null===n)throw c(e,t),new Error("could not create new worker");n.operation=e,n.busy=!0,d(n,t)}function p(e,r){var t=u(e);return t?void d(t,r):void g(e,r)}function d(e,r){if(f)e.data=r,e.postMessage(r);else{var t=function(r){return function(){return e.postMessage(r)}}(r);setTimeout(t,0)}}var v=12,m=2,w=[],b=[],x=0;return{runJob:g,continueJob:p,abortJob:h}}(),m=g,w=[{name:"algorithm",type:"Object",required:!0},{name:"keyHandle",type:"Object",required:!0},{name:"buffer",type:"Array",required:!1},{name:"signature",type:"Array",required:!0},{name:"format",type:"String",required:!0},{name:"keyData",type:"Object",required:!0},{name:"extractable",type:"Boolean",required:!1},{name:"keyUsage",type:"Array",required:!1},{name:"derivedKeyType",type:"Object",required:!0},{name:"length",type:"Number",required:!1},{name:"extractable",type:"Boolean",required:!0},{name:"keyUsage",type:"Array",required:!0}],b={encrypt:[0,1,2],decrypt:[0,1,2],sign:[0,1,2],verify:[0,1,3,2],digest:[0,2],generateKey:[0,6,7],importKey:[4,5,0,10,11],exportKey:[0,4,1,6,7],deriveKey:[0,1,8,6,7],deriveBits:[0,1,9],wrapKey:[1,1,0],unwrapKey:[2,0,1,6,7]},k={encrypt:function(e,r,t){return h("encrypt",arguments,0)},decrypt:function(e,r,t){return h("decrypt",arguments,0)},sign:function(e,r,t){return h("sign",arguments,0)},verify:function(e,r,t,n){return h("verify",arguments,0)},digest:function(e,r){return h("digest",arguments,0)},generateKey:function(e,r,t){return h("generateKey",arguments,1)},deriveKey:function(e,r,t,n,o){return h("deriveKey",arguments,1)},deriveBits:function(e,r,t){return h("deriveBits",arguments,0)},importKey:function(e,r,t,n,o){return h("importKey",arguments,1)},exportKey:function(e,r){return h("exportKey",[r.algorithm,e,r],1)},wrapKey:function(e,r,t,n){return h("wrapKey",arguments,0)},unwrapKey:function(e,r,t,n,o,i){return h("unwrapKey",arguments,1)}};return k}());var R=function(){function e(e){var r=W(e.keyData1,e.keyHandle1.algorithm.name,h["sha-1"]),n=128,o=d.keyToJwkOld(e.keyHandle,e.keyData),i={alg:e.keyHandle1.algorithm.name.toUpperCase(),enc:"A128GCM"},a=t.toBase64(JSON.stringify(i),!0),s=q.getBytes(32),u=r.encrypt(s),c=t.toBase64(u,!0),l=q.getBytes(12),f=t.toBase64(l,!0),y=a.concat(".",c,".",f),g=U(P.aes(s));g.init(l,t.stringToBytes(y),n);var p=g.encrypt(o),v=p.slice(-(n/8)),m=t.toBase64(v,!0),w=t.toBase64(p.slice(0,p.length-v.length),!0),b={recipients:[{header:a,encrypted_key:c,integrity_value:m}],initialization_vector:f,ciphertext:w};return t.stringToBytes(JSON.stringify(b))}function r(e){var r=t.base64ToBytes,n=JSON.parse(String.fromCharCode.apply(null,e.buffer)),o=(t.base64ToString(n.recipients[0].header),r(n.recipients[0].encrypted_key)),i=r(n.recipients[0].integrity_value),a=r(n.initialization_vector),s=r(n.ciphertext),u=h["sha-1"],c=W(e.keyData,e.keyHandle.algorithm.name,u),l=c.decrypt(o),f=n.recipients[0].header.concat(".",n.recipients[0].encrypted_key,".",n.initialization_vector),y=U(P.aes(l));y.init(a,t.stringToBytes(f),128);var g=y.decrypt(s,i),p=d.jwkToKey(g,e.algorithm,["k"]);return{type:"keyImport",keyData:p.k,keyHandle:{algorithm:{name:e.algorithm.name},extractable:e.extractable||p.extractable,keyUsage:e.keyUsage,type:"secret"}}}var t=g;return{wrapKey:e,unwrapKey:r}}();"undefined"!=typeof o&&(o.register("wrapKey","aes-gcm",R.wrapKey),o.register("unwrapKey","aes-cbc",R.unwrapKey));var Y={subtle:G,getRandomValues:function(e){var r,t=q.getBytes(e.length);for(r=0;r<e.length;r+=1)e[r]=t[r];return e},initPrng:function(e){var r=Object.prototype.toString.call(e);if("[object Array]"!==r&&"[object Uint8Array]"!==r)throw new Error("entropyData must be a Array or Uint8Array");_&&_.reseed(e),q.reseed(_.read(48)),a=!0},toBase64:function(e,r){return g.toBase64(e,!1)},base64ToString:function(e){return g.base64ToString(e)},url:i};"undefined"!=typeof v&&(Y.cryptoMath=v),"undefined"!=typeof testInterface&&(Y.testInterface=testInterface);var _;if(!u){_=_||new n,_.init();var X=_.read(48);q.init(X)}return Y}();"undefined"!=typeof module&&(msrCrypto.version=msrCryptoVersion,module.exports=msrCrypto);
